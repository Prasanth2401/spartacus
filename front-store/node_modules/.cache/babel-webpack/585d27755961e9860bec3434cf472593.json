{"ast":null,"code":"import * as i4 from '@angular/common';\nimport { CommonModule } from '@angular/common';\nimport * as i0 from '@angular/core';\nimport { Injectable, Component, Pipe, EventEmitter, Output, ViewChild, Input, HostBinding, NgModule } from '@angular/core';\nimport * as i1$2 from '@angular/forms';\nimport { Validators, ReactiveFormsModule } from '@angular/forms';\nimport * as i1 from '@spartacus/core';\nimport { GlobalMessageType, I18nModule, provideConfig } from '@spartacus/core';\nimport * as i3 from '@spartacus/storefront';\nimport { FormErrorsModule } from '@spartacus/storefront';\nimport { Subscription, of } from 'rxjs';\nimport { distinctUntilChanged, debounceTime, switchMap, map, take } from 'rxjs/operators';\nimport * as i2 from '@spartacus/asm/root';\nimport { ASM_ENABLED_LOCAL_STORAGE_KEY } from '@spartacus/asm/root';\nimport * as i1$1 from '@spartacus/asm/core';\n\nfunction AsmToggleUiComponent_span_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 3);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"cxTranslate\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(2, 1, \"asm.toggleUi.collapse\"), \" \");\n  }\n}\n\nfunction AsmToggleUiComponent_span_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 3);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"cxTranslate\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(2, 1, \"asm.toggleUi.expand\"), \" \");\n  }\n}\n\nfunction CustomerEmulationComponent_ng_container_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelement(1, \"input\", 1);\n    i0.ɵɵelementStart(2, \"button\", 2);\n    i0.ɵɵlistener(\"click\", function CustomerEmulationComponent_ng_container_0_Template_button_click_2_listener() {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return ctx_r1.logoutCustomer();\n    });\n    i0.ɵɵtext(3);\n    i0.ɵɵpipe(4, \"cxTranslate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate2(\"placeholder\", \"\", ctx_r0.customer == null ? null : ctx_r0.customer.name, \", \", ctx_r0.customer == null ? null : ctx_r0.customer.uid, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(4, 3, \"asm.endSession\"), \" \");\n  }\n}\n\nconst _c0 = [\"resultList\"];\nconst _c1 = [\"searchTerm\"];\n\nfunction CustomerSelectionComponent_div_9_button_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 10);\n    i0.ɵɵlistener(\"click\", function CustomerSelectionComponent_div_9_button_2_Template_button_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r9);\n      const result_r7 = restoredCtx.$implicit;\n      const ctx_r8 = i0.ɵɵnextContext(2);\n      return ctx_r8.selectCustomerFromList(result_r7);\n    });\n    i0.ɵɵelementStart(1, \"span\", 11);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"span\", 12);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const result_r7 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(result_r7.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(result_r7.uid);\n  }\n}\n\nfunction CustomerSelectionComponent_div_9_button_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 10);\n    i0.ɵɵlistener(\"click\", function CustomerSelectionComponent_div_9_button_3_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r10 = i0.ɵɵnextContext(2);\n      return ctx_r10.closeResults();\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"cxTranslate\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(2, 1, \"asm.customerSearch.noMatch\"), \" \");\n  }\n}\n\nfunction CustomerSelectionComponent_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 6, 7);\n    i0.ɵɵtemplate(2, CustomerSelectionComponent_div_9_button_2_Template, 5, 2, \"button\", 8);\n    i0.ɵɵtemplate(3, CustomerSelectionComponent_div_9_button_3_Template, 3, 3, \"button\", 9);\n    i0.ɵɵpipe(4, \"async\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const results_r3 = ctx.ngIf;\n    const ctx_r1 = i0.ɵɵnextContext();\n\n    const _r0 = i0.ɵɵreference(3);\n\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", results_r3.entries);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !i0.ɵɵpipeBind1(4, 2, ctx_r1.searchResultsLoading$) && _r0.value.length >= 3 && !!results_r3.entries && results_r3.entries.length <= 0);\n  }\n}\n\nfunction CustomerSelectionComponent_div_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 6);\n    i0.ɵɵelementStart(1, \"div\", 13);\n    i0.ɵɵpipe(2, \"cxTranslate\");\n    i0.ɵɵelement(3, \"div\");\n    i0.ɵɵelement(4, \"div\");\n    i0.ɵɵelement(5, \"div\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵattribute(\"aria-label\", i0.ɵɵpipeBind1(2, 1, \"common.loading\"));\n  }\n}\n\nfunction CSAgentLoginFormComponent_form_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"form\", 2);\n    i0.ɵɵlistener(\"ngSubmit\", function CSAgentLoginFormComponent_form_0_Template_form_ngSubmit_0_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return ctx_r2.onSubmit();\n    });\n    i0.ɵɵelementStart(1, \"label\");\n    i0.ɵɵelement(2, \"input\", 3);\n    i0.ɵɵpipe(3, \"cxTranslate\");\n    i0.ɵɵelement(4, \"cx-form-errors\", 4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"label\");\n    i0.ɵɵelement(6, \"input\", 5);\n    i0.ɵɵpipe(7, \"cxTranslate\");\n    i0.ɵɵelement(8, \"cx-form-errors\", 4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"button\", 6);\n    i0.ɵɵtext(10);\n    i0.ɵɵpipe(11, \"cxTranslate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"formGroup\", ctx_r0.csAgentLoginForm);\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate(\"placeholder\", i0.ɵɵpipeBind1(3, 6, \"asm.loginForm.userId.label\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"control\", ctx_r0.csAgentLoginForm.get(\"userId\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate(\"placeholder\", i0.ɵɵpipeBind1(7, 8, \"asm.loginForm.password.label\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"control\", ctx_r0.csAgentLoginForm.get(\"password\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(11, 10, \"asm.loginForm.submit\"), \" \");\n  }\n}\n\nfunction CSAgentLoginFormComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 7);\n    i0.ɵɵpipe(1, \"cxTranslate\");\n    i0.ɵɵelement(2, \"div\");\n    i0.ɵɵelement(3, \"div\");\n    i0.ɵɵelement(4, \"div\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵattribute(\"aria-label\", i0.ɵɵpipeBind1(1, 1, \"common.loading\"));\n  }\n}\n\nfunction AsmMainUiComponent_cx_asm_session_timer_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"cx-asm-session-timer\");\n  }\n}\n\nfunction AsmMainUiComponent_button_11_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 8);\n    i0.ɵɵlistener(\"click\", function AsmMainUiComponent_button_11_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r4 = i0.ɵɵnextContext();\n      return ctx_r4.hideUi();\n    });\n    i0.ɵɵpipe(1, \"cxTranslate\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵpropertyInterpolate(\"title\", i0.ɵɵpipeBind1(1, 1, \"asm.hideUi\"));\n  }\n}\n\nfunction AsmMainUiComponent_button_14_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 9);\n    i0.ɵɵlistener(\"click\", function AsmMainUiComponent_button_14_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return ctx_r6.logout();\n    });\n    i0.ɵɵpipe(1, \"cxTranslate\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵpropertyInterpolate(\"title\", i0.ɵɵpipeBind1(1, 1, \"asm.logout\"));\n  }\n}\n\nfunction AsmMainUiComponent_ng_container_16_ng_container_1_ng_container_1_cx_customer_emulation_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"cx-customer-emulation\");\n  }\n}\n\nfunction AsmMainUiComponent_ng_container_16_ng_container_1_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, AsmMainUiComponent_ng_container_16_ng_container_1_ng_container_1_cx_customer_emulation_1_Template, 1, 0, \"cx-customer-emulation\", 5);\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const notCollapsed_r8 = i0.ɵɵnextContext(2).ngIf;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", notCollapsed_r8);\n  }\n}\n\nfunction AsmMainUiComponent_ng_container_16_ng_container_1_ng_template_3_cx_customer_selection_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r19 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"cx-customer-selection\", 14);\n    i0.ɵɵlistener(\"submitEvent\", function AsmMainUiComponent_ng_container_16_ng_container_1_ng_template_3_cx_customer_selection_0_Template_cx_customer_selection_submitEvent_0_listener($event) {\n      i0.ɵɵrestoreView(_r19);\n      const ctx_r18 = i0.ɵɵnextContext(4);\n      return ctx_r18.startCustomerEmulationSession($event);\n    });\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AsmMainUiComponent_ng_container_16_ng_container_1_ng_template_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtemplate(0, AsmMainUiComponent_ng_container_16_ng_container_1_ng_template_3_cx_customer_selection_0_Template, 1, 0, \"cx-customer-selection\", 13);\n  }\n\n  if (rf & 2) {\n    const notCollapsed_r8 = i0.ɵɵnextContext(2).ngIf;\n    i0.ɵɵproperty(\"ngIf\", notCollapsed_r8);\n  }\n}\n\nfunction AsmMainUiComponent_ng_container_16_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, AsmMainUiComponent_ng_container_16_ng_container_1_ng_container_1_Template, 2, 1, \"ng-container\", 10);\n    i0.ɵɵpipe(2, \"async\");\n    i0.ɵɵtemplate(3, AsmMainUiComponent_ng_container_16_ng_container_1_ng_template_3_Template, 1, 1, \"ng-template\", null, 12, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const _r13 = i0.ɵɵreference(4);\n\n    const ctx_r9 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(2, 2, ctx_r9.customer$))(\"ngIfElse\", _r13);\n  }\n}\n\nfunction AsmMainUiComponent_ng_container_16_ng_template_3_cx_csagent_login_form_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r23 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"cx-csagent-login-form\", 16);\n    i0.ɵɵlistener(\"submitEvent\", function AsmMainUiComponent_ng_container_16_ng_template_3_cx_csagent_login_form_0_Template_cx_csagent_login_form_submitEvent_0_listener($event) {\n      i0.ɵɵrestoreView(_r23);\n      const ctx_r22 = i0.ɵɵnextContext(3);\n      return ctx_r22.loginCustomerSupportAgent($event);\n    });\n    i0.ɵɵpipe(1, \"async\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r21 = i0.ɵɵnextContext(3);\n    i0.ɵɵproperty(\"csAgentTokenLoading\", i0.ɵɵpipeBind1(1, 1, ctx_r21.csAgentTokenLoading$));\n  }\n}\n\nfunction AsmMainUiComponent_ng_container_16_ng_template_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtemplate(0, AsmMainUiComponent_ng_container_16_ng_template_3_cx_csagent_login_form_0_Template, 2, 3, \"cx-csagent-login-form\", 15);\n  }\n\n  if (rf & 2) {\n    const notCollapsed_r8 = i0.ɵɵnextContext().ngIf;\n    i0.ɵɵproperty(\"ngIf\", notCollapsed_r8);\n  }\n}\n\nfunction AsmMainUiComponent_ng_container_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, AsmMainUiComponent_ng_container_16_ng_container_1_Template, 5, 4, \"ng-container\", 10);\n    i0.ɵɵpipe(2, \"async\");\n    i0.ɵɵtemplate(3, AsmMainUiComponent_ng_container_16_ng_template_3_Template, 1, 1, \"ng-template\", null, 11, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const _r10 = i0.ɵɵreference(4);\n\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(2, 2, ctx_r3.customerSupportAgentLoggedIn$))(\"ngIfElse\", _r10);\n  }\n}\n\nclass AsmComponentService {\n  constructor(authService, csAgentAuthService, winRef) {\n    this.authService = authService;\n    this.csAgentAuthService = csAgentAuthService;\n    this.winRef = winRef;\n  }\n\n  logoutCustomerSupportAgentAndCustomer() {\n    this.csAgentAuthService.logoutCustomerSupportAgent();\n  }\n\n  logoutCustomer() {\n    this.authService.logout();\n  }\n\n  isCustomerEmulationSessionInProgress() {\n    return this.csAgentAuthService.isCustomerEmulated();\n  }\n  /**\n   * We're currently only removing the persisted storage in the browser\n   * to ensure the ASM experience isn't loaded on the next visit. There are a few\n   * optimizations we could think of:\n   * - drop the `asm` parameter from the URL, in case it's still there\n   * - remove the generated UI from the DOM (outlets currently do not support this)\n   */\n\n\n  unload() {\n    if (this.winRef.localStorage) {\n      this.winRef.localStorage.removeItem(ASM_ENABLED_LOCAL_STORAGE_KEY);\n    }\n  }\n\n}\n\nAsmComponentService.ɵfac = function AsmComponentService_Factory(t) {\n  return new (t || AsmComponentService)(i0.ɵɵinject(i1.AuthService), i0.ɵɵinject(i2.CsAgentAuthService), i0.ɵɵinject(i1.WindowRef));\n};\n\nAsmComponentService.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n  token: AsmComponentService,\n  factory: AsmComponentService.ɵfac,\n  providedIn: 'root'\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(AsmComponentService, [{\n    type: Injectable,\n    args: [{\n      providedIn: 'root'\n    }]\n  }], function () {\n    return [{\n      type: i1.AuthService\n    }, {\n      type: i2.CsAgentAuthService\n    }, {\n      type: i1.WindowRef\n    }];\n  }, null);\n})();\n\nclass AsmToggleUiComponent {\n  constructor(asmService) {\n    this.asmService = asmService;\n    this.subscription = new Subscription();\n  }\n\n  ngOnInit() {\n    this.subscription.add(this.asmService.getAsmUiState().subscribe(uiState => {\n      this.isCollapsed = uiState.collapsed === undefined ? false : uiState.collapsed;\n    }));\n  }\n\n  toggleUi() {\n    this.asmService.updateAsmUiState({\n      collapsed: !this.isCollapsed\n    });\n  }\n\n  ngOnDestroy() {\n    this.subscription.unsubscribe();\n  }\n\n}\n\nAsmToggleUiComponent.ɵfac = function AsmToggleUiComponent_Factory(t) {\n  return new (t || AsmToggleUiComponent)(i0.ɵɵdirectiveInject(i1$1.AsmService));\n};\n\nAsmToggleUiComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: AsmToggleUiComponent,\n  selectors: [[\"cx-asm-toggle-ui\"]],\n  decls: 4,\n  vars: 3,\n  consts: [[1, \"toggleUi\", 3, \"click\"], [3, \"ngClass\"], [\"class\", \"label\", 4, \"ngIf\"], [1, \"label\"]],\n  template: function AsmToggleUiComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"a\", 0);\n      i0.ɵɵlistener(\"click\", function AsmToggleUiComponent_Template_a_click_0_listener() {\n        return ctx.toggleUi();\n      });\n      i0.ɵɵelement(1, \"span\", 1);\n      i0.ɵɵtemplate(2, AsmToggleUiComponent_span_2_Template, 3, 3, \"span\", 2);\n      i0.ɵɵtemplate(3, AsmToggleUiComponent_span_3_Template, 3, 3, \"span\", 2);\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngClass\", !ctx.isCollapsed ? \"collapseIcon\" : \"expandIcon\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", !ctx.isCollapsed);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.isCollapsed);\n    }\n  },\n  directives: [i4.NgClass, i4.NgIf],\n  pipes: [i1.TranslatePipe],\n  encapsulation: 2\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(AsmToggleUiComponent, [{\n    type: Component,\n    args: [{\n      selector: 'cx-asm-toggle-ui',\n      templateUrl: './asm-toggle-ui.component.html'\n    }]\n  }], function () {\n    return [{\n      type: i1$1.AsmService\n    }];\n  }, null);\n})();\n\nclass FormatTimerPipe {\n  transform(totalSeconds) {\n    if (totalSeconds < 0) {\n      totalSeconds = 0;\n    }\n\n    const minutes = Math.floor(totalSeconds / 60);\n    const seconds = totalSeconds % 60;\n    let zeroPaddedMinutes;\n\n    if (minutes < 10) {\n      zeroPaddedMinutes = ('00' + minutes).slice(-2);\n    } else {\n      zeroPaddedMinutes = minutes + '';\n    }\n\n    const zeroPaddedSeconds = ('00' + seconds).slice(-2);\n    return `${zeroPaddedMinutes}:${zeroPaddedSeconds}`;\n  }\n\n}\n\nFormatTimerPipe.ɵfac = function FormatTimerPipe_Factory(t) {\n  return new (t || FormatTimerPipe)();\n};\n\nFormatTimerPipe.ɵpipe = /* @__PURE__ */i0.ɵɵdefinePipe({\n  name: \"formatTimer\",\n  type: FormatTimerPipe,\n  pure: true\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(FormatTimerPipe, [{\n    type: Pipe,\n    args: [{\n      name: 'formatTimer'\n    }]\n  }], null, null);\n})();\n\nclass AsmSessionTimerComponent {\n  constructor(config, asmComponentService, routingService, changeDetectorRef, userIdService) {\n    this.config = config;\n    this.asmComponentService = asmComponentService;\n    this.routingService = routingService;\n    this.changeDetectorRef = changeDetectorRef;\n    this.userIdService = userIdService;\n    this.subscriptions = new Subscription();\n    this.maxStartDelayInSeconds = 60000;\n  }\n\n  ngOnInit() {\n    this.timeLeft = this.getTimerStartDelayInSeconds();\n    this.interval = setInterval(() => {\n      if (this.timeLeft > 0) {\n        this.timeLeft--;\n      } else {\n        clearInterval(this.interval);\n        this.asmComponentService.logoutCustomerSupportAgentAndCustomer();\n      }\n\n      this.changeDetectorRef.markForCheck();\n    }, 1000);\n    this.resetOnNavigate();\n    this.resetOnCustomerSessionChange();\n  }\n\n  resetOnNavigate() {\n    this.subscriptions.add(this.routingService.isNavigating().subscribe(isNavigating => {\n      if (isNavigating) {\n        this.resetTimer();\n      }\n    }));\n  }\n\n  resetOnCustomerSessionChange() {\n    this.subscriptions.add(this.userIdService.getUserId().pipe(distinctUntilChanged()).subscribe(() => this.resetTimer()));\n  }\n\n  resetTimer() {\n    if (this.timeLeft > 0) {\n      this.timeLeft = this.getTimerStartDelayInSeconds();\n    }\n  }\n\n  getTimerStartDelayInSeconds() {\n    var _a, _b;\n\n    if (((_b = (_a = this.config.asm) === null || _a === void 0 ? void 0 : _a.agentSessionTimer) === null || _b === void 0 ? void 0 : _b.startingDelayInSeconds) === undefined) {\n      return 600;\n    }\n\n    if (this.config.asm.agentSessionTimer.startingDelayInSeconds > this.maxStartDelayInSeconds) {\n      return this.maxStartDelayInSeconds;\n    } else {\n      return this.config.asm.agentSessionTimer.startingDelayInSeconds;\n    }\n  }\n\n  ngOnDestroy() {\n    this.subscriptions.unsubscribe();\n\n    if (this.interval) {\n      clearInterval(this.interval);\n    }\n  }\n\n}\n\nAsmSessionTimerComponent.ɵfac = function AsmSessionTimerComponent_Factory(t) {\n  return new (t || AsmSessionTimerComponent)(i0.ɵɵdirectiveInject(i1$1.AsmConfig), i0.ɵɵdirectiveInject(AsmComponentService), i0.ɵɵdirectiveInject(i1.RoutingService), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef), i0.ɵɵdirectiveInject(i1.UserIdService));\n};\n\nAsmSessionTimerComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: AsmSessionTimerComponent,\n  selectors: [[\"cx-asm-session-timer\"]],\n  decls: 9,\n  vars: 12,\n  consts: [[1, \"label\"], [1, \"time\"], [1, \"reset\", 3, \"title\", \"click\"]],\n  template: function AsmSessionTimerComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"span\", 0);\n      i0.ɵɵtext(1);\n      i0.ɵɵpipe(2, \"cxTranslate\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(3, \"span\", 1);\n      i0.ɵɵtext(4);\n      i0.ɵɵpipe(5, \"formatTimer\");\n      i0.ɵɵpipe(6, \"cxTranslate\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(7, \"button\", 2);\n      i0.ɵɵlistener(\"click\", function AsmSessionTimerComponent_Template_button_click_7_listener() {\n        return ctx.resetTimer();\n      });\n      i0.ɵɵpipe(8, \"cxTranslate\");\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(1);\n      i0.ɵɵtextInterpolate1(\"\", i0.ɵɵpipeBind1(2, 4, \"asm.agentSessionTimer.label\"), \":\");\n      i0.ɵɵadvance(3);\n      i0.ɵɵtextInterpolate2(\"\", i0.ɵɵpipeBind1(5, 6, ctx.timeLeft), \" \", i0.ɵɵpipeBind1(6, 8, \"asm.agentSessionTimer.minutes\"), \"\");\n      i0.ɵɵadvance(3);\n      i0.ɵɵpropertyInterpolate(\"title\", i0.ɵɵpipeBind1(8, 10, \"asm.agentSessionTimer.reset\"));\n    }\n  },\n  pipes: [i1.TranslatePipe, FormatTimerPipe],\n  encapsulation: 2\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(AsmSessionTimerComponent, [{\n    type: Component,\n    args: [{\n      selector: 'cx-asm-session-timer',\n      templateUrl: './asm-session-timer.component.html'\n    }]\n  }], function () {\n    return [{\n      type: i1$1.AsmConfig\n    }, {\n      type: AsmComponentService\n    }, {\n      type: i1.RoutingService\n    }, {\n      type: i0.ChangeDetectorRef\n    }, {\n      type: i1.UserIdService\n    }];\n  }, null);\n})();\n\nclass CustomerEmulationComponent {\n  constructor(asmComponentService, userService) {\n    this.asmComponentService = asmComponentService;\n    this.userService = userService;\n    this.subscription = new Subscription();\n  }\n\n  ngOnInit() {\n    this.subscription.add(this.userService.get().subscribe(user => {\n      if (user) this.customer = user;\n    }));\n    this.isCustomerEmulationSessionInProgress$ = this.asmComponentService.isCustomerEmulationSessionInProgress();\n  }\n\n  logoutCustomer() {\n    this.asmComponentService.logoutCustomer();\n  }\n\n  ngOnDestroy() {\n    this.subscription.unsubscribe();\n  }\n\n}\n\nCustomerEmulationComponent.ɵfac = function CustomerEmulationComponent_Factory(t) {\n  return new (t || CustomerEmulationComponent)(i0.ɵɵdirectiveInject(AsmComponentService), i0.ɵɵdirectiveInject(i1.UserService));\n};\n\nCustomerEmulationComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: CustomerEmulationComponent,\n  selectors: [[\"cx-customer-emulation\"]],\n  decls: 2,\n  vars: 3,\n  consts: [[4, \"ngIf\"], [\"formcontrolname\", \"customer\", \"type\", \"text\", \"disabled\", \"true\", 3, \"placeholder\"], [3, \"click\"]],\n  template: function CustomerEmulationComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, CustomerEmulationComponent_ng_container_0_Template, 5, 5, \"ng-container\", 0);\n      i0.ɵɵpipe(1, \"async\");\n    }\n\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(1, 1, ctx.isCustomerEmulationSessionInProgress$));\n    }\n  },\n  directives: [i4.NgIf],\n  pipes: [i4.AsyncPipe, i1.TranslatePipe],\n  encapsulation: 2\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(CustomerEmulationComponent, [{\n    type: Component,\n    args: [{\n      selector: 'cx-customer-emulation',\n      templateUrl: './customer-emulation.component.html'\n    }]\n  }], function () {\n    return [{\n      type: AsmComponentService\n    }, {\n      type: i1.UserService\n    }];\n  }, null);\n})();\n\nclass CustomerSelectionComponent {\n  constructor(fb, asmService, config) {\n    this.fb = fb;\n    this.asmService = asmService;\n    this.config = config;\n    this.subscription = new Subscription();\n    this.submitEvent = new EventEmitter();\n  }\n\n  ngOnInit() {\n    this.customerSelectionForm = this.fb.group({\n      searchTerm: ['', Validators.required]\n    });\n    this.asmService.customerSearchReset();\n    this.searchResultsLoading$ = this.asmService.getCustomerSearchResultsLoading();\n    this.searchResults = this.asmService.getCustomerSearchResults();\n    this.subscription.add(this.customerSelectionForm.controls.searchTerm.valueChanges.pipe(debounceTime(300)).subscribe(searchTermValue => {\n      this.handleSearchTerm(searchTermValue);\n    }));\n  }\n\n  handleSearchTerm(searchTermValue) {\n    var _a, _b;\n\n    if (!!this.selectedCustomer && searchTermValue !== this.selectedCustomer.name) {\n      this.selectedCustomer = undefined;\n    }\n\n    if (Boolean(this.selectedCustomer)) {\n      return;\n    }\n\n    this.asmService.customerSearchReset();\n\n    if (searchTermValue.trim().length >= 3) {\n      this.asmService.customerSearch({\n        query: searchTermValue,\n        pageSize: (_b = (_a = this.config.asm) === null || _a === void 0 ? void 0 : _a.customerSearch) === null || _b === void 0 ? void 0 : _b.maxResults\n      });\n    }\n  }\n\n  selectCustomerFromList(customer) {\n    this.selectedCustomer = customer;\n    this.customerSelectionForm.controls.searchTerm.setValue(this.selectedCustomer.name);\n    this.asmService.customerSearchReset();\n  }\n\n  onSubmit() {\n    if (this.customerSelectionForm.valid && !!this.selectedCustomer) {\n      this.submitEvent.emit({\n        customerId: this.selectedCustomer.customerId\n      });\n    } else {\n      this.customerSelectionForm.markAllAsTouched();\n    }\n  }\n\n  onDocumentClick(event) {\n    if (Boolean(this.resultList)) {\n      if (this.resultList.nativeElement.contains(event.target) || this.searchTerm.nativeElement.contains(event.target)) {\n        return;\n      } else {\n        this.asmService.customerSearchReset();\n      }\n    }\n  }\n\n  closeResults() {\n    this.asmService.customerSearchReset();\n  }\n\n  ngOnDestroy() {\n    this.subscription.unsubscribe();\n    this.asmService.customerSearchReset();\n  }\n\n}\n\nCustomerSelectionComponent.ɵfac = function CustomerSelectionComponent_Factory(t) {\n  return new (t || CustomerSelectionComponent)(i0.ɵɵdirectiveInject(i1$2.FormBuilder), i0.ɵɵdirectiveInject(i1$1.AsmService), i0.ɵɵdirectiveInject(i1$1.AsmConfig));\n};\n\nCustomerSelectionComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: CustomerSelectionComponent,\n  selectors: [[\"cx-customer-selection\"]],\n  viewQuery: function CustomerSelectionComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 5);\n      i0.ɵɵviewQuery(_c1, 5);\n    }\n\n    if (rf & 2) {\n      let _t;\n\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.resultList = _t.first);\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.searchTerm = _t.first);\n    }\n  },\n  hostBindings: function CustomerSelectionComponent_HostBindings(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵlistener(\"click\", function CustomerSelectionComponent_click_HostBindingHandler($event) {\n        return ctx.onDocumentClick($event);\n      }, false, i0.ɵɵresolveDocument);\n    }\n  },\n  outputs: {\n    submitEvent: \"submitEvent\"\n  },\n  decls: 13,\n  vars: 14,\n  consts: [[3, \"formGroup\", \"ngSubmit\"], [\"aria-required\", \"true\", \"type\", \"text\", \"formControlName\", \"searchTerm\", 3, \"placeholder\"], [\"searchTerm\", \"\"], [\"aria-live\", \"assertive\", \"aria-atomic\", \"true\", 3, \"control\"], [\"type\", \"submit\"], [\"class\", \"asm-results\", 4, \"ngIf\"], [1, \"asm-results\"], [\"resultList\", \"\"], [3, \"click\", 4, \"ngFor\", \"ngForOf\"], [3, \"click\", 4, \"ngIf\"], [3, \"click\"], [1, \"result-name\"], [1, \"result-id\"], [\"aria-hidden\", \"false\", 1, \"spinner\"]],\n  template: function CustomerSelectionComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"form\", 0);\n      i0.ɵɵlistener(\"ngSubmit\", function CustomerSelectionComponent_Template_form_ngSubmit_0_listener() {\n        return ctx.onSubmit();\n      });\n      i0.ɵɵelementStart(1, \"label\");\n      i0.ɵɵelement(2, \"input\", 1, 2);\n      i0.ɵɵpipe(4, \"cxTranslate\");\n      i0.ɵɵelement(5, \"cx-form-errors\", 3);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(6, \"button\", 4);\n      i0.ɵɵtext(7);\n      i0.ɵɵpipe(8, \"cxTranslate\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(9, CustomerSelectionComponent_div_9_Template, 5, 4, \"div\", 5);\n      i0.ɵɵpipe(10, \"async\");\n      i0.ɵɵtemplate(11, CustomerSelectionComponent_div_11_Template, 6, 3, \"div\", 5);\n      i0.ɵɵpipe(12, \"async\");\n    }\n\n    if (rf & 2) {\n      i0.ɵɵproperty(\"formGroup\", ctx.customerSelectionForm);\n      i0.ɵɵadvance(2);\n      i0.ɵɵpropertyInterpolate(\"placeholder\", i0.ɵɵpipeBind1(4, 6, \"asm.customerSearch.searchTerm.label\"));\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"control\", ctx.customerSelectionForm.get(\"searchTerm\"));\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(8, 8, \"asm.customerSearch.submit\"), \" \");\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(10, 10, ctx.searchResults));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(12, 12, ctx.searchResultsLoading$));\n    }\n  },\n  directives: [i1$2.ɵNgNoValidate, i1$2.NgControlStatusGroup, i1$2.FormGroupDirective, i1$2.DefaultValueAccessor, i1$2.NgControlStatus, i1$2.FormControlName, i3.FormErrorsComponent, i4.NgIf, i4.NgForOf],\n  pipes: [i1.TranslatePipe, i4.AsyncPipe],\n  encapsulation: 2\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(CustomerSelectionComponent, [{\n    type: Component,\n    args: [{\n      selector: 'cx-customer-selection',\n      templateUrl: './customer-selection.component.html',\n      host: {\n        '(document:click)': 'onDocumentClick($event)'\n      }\n    }]\n  }], function () {\n    return [{\n      type: i1$2.FormBuilder\n    }, {\n      type: i1$1.AsmService\n    }, {\n      type: i1$1.AsmConfig\n    }];\n  }, {\n    submitEvent: [{\n      type: Output\n    }],\n    resultList: [{\n      type: ViewChild,\n      args: ['resultList']\n    }],\n    searchTerm: [{\n      type: ViewChild,\n      args: ['searchTerm']\n    }]\n  });\n})();\n\nclass CSAgentLoginFormComponent {\n  constructor(fb) {\n    this.fb = fb;\n    this.csAgentTokenLoading = false;\n    this.submitEvent = new EventEmitter();\n  }\n\n  ngOnInit() {\n    this.csAgentLoginForm = this.fb.group({\n      userId: ['', [Validators.required]],\n      password: ['', [Validators.required]]\n    });\n  }\n\n  onSubmit() {\n    var _a, _b;\n\n    if (this.csAgentLoginForm.valid) {\n      this.submitEvent.emit({\n        userId: (_a = this.csAgentLoginForm.get('userId')) === null || _a === void 0 ? void 0 : _a.value,\n        password: (_b = this.csAgentLoginForm.get('password')) === null || _b === void 0 ? void 0 : _b.value\n      });\n    } else {\n      this.csAgentLoginForm.markAllAsTouched();\n    }\n  }\n\n}\n\nCSAgentLoginFormComponent.ɵfac = function CSAgentLoginFormComponent_Factory(t) {\n  return new (t || CSAgentLoginFormComponent)(i0.ɵɵdirectiveInject(i1$2.FormBuilder));\n};\n\nCSAgentLoginFormComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: CSAgentLoginFormComponent,\n  selectors: [[\"cx-csagent-login-form\"]],\n  inputs: {\n    csAgentTokenLoading: \"csAgentTokenLoading\"\n  },\n  outputs: {\n    submitEvent: \"submitEvent\"\n  },\n  decls: 2,\n  vars: 2,\n  consts: [[3, \"formGroup\", \"ngSubmit\", 4, \"ngIf\"], [\"class\", \"spinner\", \"aria-hidden\", \"false\", 4, \"ngIf\"], [3, \"formGroup\", \"ngSubmit\"], [\"aria-required\", \"true\", \"type\", \"text\", \"formControlName\", \"userId\", 3, \"placeholder\"], [\"aria-live\", \"assertive\", \"aria-atomic\", \"true\", 3, \"control\"], [\"aria-required\", \"true\", \"type\", \"password\", \"formControlName\", \"password\", 3, \"placeholder\"], [\"type\", \"submit\"], [\"aria-hidden\", \"false\", 1, \"spinner\"]],\n  template: function CSAgentLoginFormComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, CSAgentLoginFormComponent_form_0_Template, 12, 12, \"form\", 0);\n      i0.ɵɵtemplate(1, CSAgentLoginFormComponent_div_1_Template, 5, 3, \"div\", 1);\n    }\n\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", !ctx.csAgentTokenLoading);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.csAgentTokenLoading);\n    }\n  },\n  directives: [i4.NgIf, i1$2.ɵNgNoValidate, i1$2.NgControlStatusGroup, i1$2.FormGroupDirective, i1$2.DefaultValueAccessor, i1$2.NgControlStatus, i1$2.FormControlName, i3.FormErrorsComponent],\n  pipes: [i1.TranslatePipe],\n  encapsulation: 2\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(CSAgentLoginFormComponent, [{\n    type: Component,\n    args: [{\n      selector: 'cx-csagent-login-form',\n      templateUrl: './csagent-login-form.component.html'\n    }]\n  }], function () {\n    return [{\n      type: i1$2.FormBuilder\n    }];\n  }, {\n    csAgentTokenLoading: [{\n      type: Input\n    }],\n    submitEvent: [{\n      type: Output\n    }]\n  });\n})();\n\nclass AsmMainUiComponent {\n  constructor(authService, csAgentAuthService, userService, asmComponentService, globalMessageService, routingService, asmService) {\n    this.authService = authService;\n    this.csAgentAuthService = csAgentAuthService;\n    this.userService = userService;\n    this.asmComponentService = asmComponentService;\n    this.globalMessageService = globalMessageService;\n    this.routingService = routingService;\n    this.asmService = asmService;\n    this.disabled = false;\n    this.startingCustomerSession = false;\n  }\n\n  ngOnInit() {\n    this.customerSupportAgentLoggedIn$ = this.csAgentAuthService.isCustomerSupportAgentLoggedIn();\n    this.csAgentTokenLoading$ = this.csAgentAuthService.getCustomerSupportAgentTokenLoading();\n    this.customer$ = this.authService.isUserLoggedIn().pipe(switchMap(isLoggedIn => {\n      if (isLoggedIn) {\n        this.handleCustomerSessionStartRedirection();\n        return this.userService.get();\n      } else {\n        return of(undefined);\n      }\n    }));\n    this.isCollapsed$ = this.asmService.getAsmUiState().pipe(map(uiState => uiState.collapsed === undefined ? false : uiState.collapsed));\n  }\n\n  handleCustomerSessionStartRedirection() {\n    this.asmComponentService.isCustomerEmulationSessionInProgress().pipe(take(1)).subscribe(isCustomerEmulated => {\n      if (this.startingCustomerSession && isCustomerEmulated) {\n        this.startingCustomerSession = false;\n        this.globalMessageService.remove(GlobalMessageType.MSG_TYPE_ERROR);\n        this.routingService.go('/');\n      }\n    });\n  }\n\n  loginCustomerSupportAgent({\n    userId,\n    password\n  }) {\n    this.csAgentAuthService.authorizeCustomerSupportAgent(userId, password);\n  }\n\n  logout() {\n    this.asmComponentService.logoutCustomerSupportAgentAndCustomer();\n  }\n\n  startCustomerEmulationSession({\n    customerId\n  }) {\n    if (customerId) {\n      this.csAgentAuthService.startCustomerEmulationSession(customerId);\n      this.startingCustomerSession = true;\n    } else {\n      this.globalMessageService.add({\n        key: 'asm.error.noCustomerId'\n      }, GlobalMessageType.MSG_TYPE_ERROR);\n    }\n  }\n\n  hideUi() {\n    this.disabled = true;\n    this.asmComponentService.unload();\n  }\n\n}\n\nAsmMainUiComponent.ɵfac = function AsmMainUiComponent_Factory(t) {\n  return new (t || AsmMainUiComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.CsAgentAuthService), i0.ɵɵdirectiveInject(i1.UserService), i0.ɵɵdirectiveInject(AsmComponentService), i0.ɵɵdirectiveInject(i1.GlobalMessageService), i0.ɵɵdirectiveInject(i1.RoutingService), i0.ɵɵdirectiveInject(i1$1.AsmService));\n};\n\nAsmMainUiComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: AsmMainUiComponent,\n  selectors: [[\"cx-asm-main-ui\"]],\n  hostVars: 2,\n  hostBindings: function AsmMainUiComponent_HostBindings(rf, ctx) {\n    if (rf & 2) {\n      i0.ɵɵclassProp(\"hidden\", ctx.disabled);\n    }\n  },\n  decls: 18,\n  vars: 20,\n  consts: [[1, \"asm-bar\"], [1, \"asm-bar-branding\"], [\"src\", \"data:image/png;base64,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\", \"width\", \"48\", \"height\", \"24\", 1, \"logo\", 3, \"alt\"], [1, \"asm-title\"], [1, \"asm-bar-actions\"], [4, \"ngIf\"], [\"class\", \"close\", 3, \"title\", \"click\", 4, \"ngIf\"], [\"class\", \"logout\", 3, \"title\", \"click\", 4, \"ngIf\"], [1, \"close\", 3, \"title\", \"click\"], [1, \"logout\", 3, \"title\", \"click\"], [4, \"ngIf\", \"ngIfElse\"], [\"showLoginForm\", \"\"], [\"showCustomerSelection\", \"\"], [3, \"submitEvent\", 4, \"ngIf\"], [3, \"submitEvent\"], [3, \"csAgentTokenLoading\", \"submitEvent\", 4, \"ngIf\"], [3, \"csAgentTokenLoading\", \"submitEvent\"]],\n  template: function AsmMainUiComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵelementStart(1, \"div\", 1);\n      i0.ɵɵelement(2, \"img\", 2);\n      i0.ɵɵpipe(3, \"cxTranslate\");\n      i0.ɵɵelementStart(4, \"div\", 3);\n      i0.ɵɵtext(5);\n      i0.ɵɵpipe(6, \"cxTranslate\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(7, \"div\", 4);\n      i0.ɵɵelement(8, \"cx-asm-toggle-ui\");\n      i0.ɵɵtemplate(9, AsmMainUiComponent_cx_asm_session_timer_9_Template, 1, 0, \"cx-asm-session-timer\", 5);\n      i0.ɵɵpipe(10, \"async\");\n      i0.ɵɵtemplate(11, AsmMainUiComponent_button_11_Template, 2, 3, \"button\", 6);\n      i0.ɵɵpipe(12, \"async\");\n      i0.ɵɵpipe(13, \"async\");\n      i0.ɵɵtemplate(14, AsmMainUiComponent_button_14_Template, 2, 3, \"button\", 7);\n      i0.ɵɵpipe(15, \"async\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(16, AsmMainUiComponent_ng_container_16_Template, 5, 4, \"ng-container\", 5);\n      i0.ɵɵpipe(17, \"async\");\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(2);\n      i0.ɵɵpropertyInterpolate(\"alt\", i0.ɵɵpipeBind1(3, 6, \"asm.mainLogoLabel\"));\n      i0.ɵɵadvance(3);\n      i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(6, 8, \"asm.mainTitle\"), \" \");\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(10, 10, ctx.customerSupportAgentLoggedIn$));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", !i0.ɵɵpipeBind1(12, 12, ctx.customerSupportAgentLoggedIn$) && !i0.ɵɵpipeBind1(13, 14, ctx.csAgentTokenLoading$));\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(15, 16, ctx.customerSupportAgentLoggedIn$));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", !i0.ɵɵpipeBind1(17, 18, ctx.isCollapsed$));\n    }\n  },\n  directives: [AsmToggleUiComponent, i4.NgIf, AsmSessionTimerComponent, CustomerEmulationComponent, CustomerSelectionComponent, CSAgentLoginFormComponent],\n  pipes: [i1.TranslatePipe, i4.AsyncPipe],\n  encapsulation: 2\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(AsmMainUiComponent, [{\n    type: Component,\n    args: [{\n      selector: 'cx-asm-main-ui',\n      templateUrl: './asm-main-ui.component.html'\n    }]\n  }], function () {\n    return [{\n      type: i1.AuthService\n    }, {\n      type: i2.CsAgentAuthService\n    }, {\n      type: i1.UserService\n    }, {\n      type: AsmComponentService\n    }, {\n      type: i1.GlobalMessageService\n    }, {\n      type: i1.RoutingService\n    }, {\n      type: i1$1.AsmService\n    }];\n  }, {\n    disabled: [{\n      type: HostBinding,\n      args: ['class.hidden']\n    }]\n  });\n})();\n\nconst defaultAsmLayoutConfig = {\n  launch: {\n    ASM: {\n      outlet: 'cx-storefront',\n      component: AsmMainUiComponent\n    }\n  }\n};\n\nclass AsmComponentsModule {}\n\nAsmComponentsModule.ɵfac = function AsmComponentsModule_Factory(t) {\n  return new (t || AsmComponentsModule)();\n};\n\nAsmComponentsModule.ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n  type: AsmComponentsModule\n});\nAsmComponentsModule.ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({\n  providers: [provideConfig(defaultAsmLayoutConfig)],\n  imports: [[CommonModule, ReactiveFormsModule, I18nModule, FormErrorsModule]]\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(AsmComponentsModule, [{\n    type: NgModule,\n    args: [{\n      imports: [CommonModule, ReactiveFormsModule, I18nModule, FormErrorsModule],\n      declarations: [AsmMainUiComponent, CSAgentLoginFormComponent, CustomerSelectionComponent, AsmSessionTimerComponent, FormatTimerPipe, CustomerEmulationComponent, AsmToggleUiComponent],\n      exports: [AsmMainUiComponent, CSAgentLoginFormComponent, CustomerSelectionComponent, AsmSessionTimerComponent, FormatTimerPipe, CustomerEmulationComponent, AsmToggleUiComponent],\n      providers: [provideConfig(defaultAsmLayoutConfig)]\n    }]\n  }], null, null);\n})();\n/**\n * Generated bundle index. Do not edit.\n */\n\n\nexport { AsmComponentService, AsmComponentsModule, AsmMainUiComponent, AsmSessionTimerComponent, AsmToggleUiComponent, CSAgentLoginFormComponent, CustomerEmulationComponent, CustomerSelectionComponent, FormatTimerPipe }; //# sourceMappingURL=spartacus-asm-components.js.map","map":{"version":3,"sources":["D:/spartacus/front-store/node_modules/@spartacus/asm/fesm2015/spartacus-asm-components.js","D:/spartacus/front-store/node_modules/feature-libs/asm/components/asm-toggle-ui/asm-toggle-ui.component.html","D:/spartacus/front-store/node_modules/feature-libs/asm/components/customer-emulation/customer-emulation.component.html","D:/spartacus/front-store/node_modules/feature-libs/asm/components/customer-selection/customer-selection.component.html","D:/spartacus/front-store/node_modules/feature-libs/asm/components/csagent-login-form/csagent-login-form.component.html","D:/spartacus/front-store/node_modules/feature-libs/asm/components/asm-main-ui/asm-main-ui.component.html","D:/spartacus/front-store/node_modules/feature-libs/asm/components/asm-session-timer/asm-session-timer.component.html"],"names":["i4","CommonModule","i0","Injectable","Component","Pipe","EventEmitter","Output","ViewChild","Input","HostBinding","NgModule","i1$2","Validators","ReactiveFormsModule","i1","GlobalMessageType","I18nModule","provideConfig","i3","FormErrorsModule","Subscription","of","distinctUntilChanged","debounceTime","switchMap","map","take","i2","ASM_ENABLED_LOCAL_STORAGE_KEY","i1$1","AsmComponentService","constructor","authService","csAgentAuthService","winRef","logoutCustomerSupportAgentAndCustomer","logoutCustomerSupportAgent","logoutCustomer","logout","isCustomerEmulationSessionInProgress","isCustomerEmulated","unload","localStorage","removeItem","ɵfac","AuthService","CsAgentAuthService","WindowRef","ɵprov","type","args","providedIn","AsmToggleUiComponent","asmService","subscription","ngOnInit","add","getAsmUiState","subscribe","uiState","isCollapsed","collapsed","undefined","toggleUi","updateAsmUiState","ngOnDestroy","unsubscribe","AsmService","ɵcmp","NgClass","NgIf","TranslatePipe","selector","templateUrl","FormatTimerPipe","transform","totalSeconds","minutes","Math","floor","seconds","zeroPaddedMinutes","slice","zeroPaddedSeconds","ɵpipe","name","AsmSessionTimerComponent","config","asmComponentService","routingService","changeDetectorRef","userIdService","subscriptions","maxStartDelayInSeconds","timeLeft","getTimerStartDelayInSeconds","interval","setInterval","clearInterval","markForCheck","resetOnNavigate","resetOnCustomerSessionChange","isNavigating","resetTimer","getUserId","pipe","_a","_b","asm","agentSessionTimer","startingDelayInSeconds","AsmConfig","RoutingService","ChangeDetectorRef","UserIdService","CustomerEmulationComponent","userService","get","user","customer","isCustomerEmulationSessionInProgress$","UserService","AsyncPipe","CustomerSelectionComponent","fb","submitEvent","customerSelectionForm","group","searchTerm","required","customerSearchReset","searchResultsLoading$","getCustomerSearchResultsLoading","searchResults","getCustomerSearchResults","controls","valueChanges","searchTermValue","handleSearchTerm","selectedCustomer","Boolean","trim","length","customerSearch","query","pageSize","maxResults","selectCustomerFromList","setValue","onSubmit","valid","emit","customerId","markAllAsTouched","onDocumentClick","event","resultList","nativeElement","contains","target","closeResults","FormBuilder","ɵNgNoValidate","NgControlStatusGroup","FormGroupDirective","DefaultValueAccessor","NgControlStatus","FormControlName","FormErrorsComponent","NgForOf","host","CSAgentLoginFormComponent","csAgentTokenLoading","csAgentLoginForm","userId","password","value","AsmMainUiComponent","globalMessageService","disabled","startingCustomerSession","customerSupportAgentLoggedIn$","isCustomerSupportAgentLoggedIn","csAgentTokenLoading$","getCustomerSupportAgentTokenLoading","customer$","isUserLoggedIn","isLoggedIn","handleCustomerSessionStartRedirection","isCollapsed$","remove","MSG_TYPE_ERROR","go","loginCustomerSupportAgent","authorizeCustomerSupportAgent","startCustomerEmulationSession","key","hideUi","GlobalMessageService","defaultAsmLayoutConfig","launch","ASM","outlet","component","AsmComponentsModule","ɵmod","ɵinj","imports","declarations","exports","providers"],"mappings":"AAAA,OAAO,KAAKA,EAAZ,MAAoB,iBAApB;AACA,SAASC,YAAT,QAA6B,iBAA7B;AACA,OAAO,KAAKC,EAAZ,MAAoB,eAApB;AACA,SAASC,UAAT,EAAqBC,SAArB,EAAgCC,IAAhC,EAAsCC,YAAtC,EAAoDC,MAApD,EAA4DC,SAA5D,EAAuEC,KAAvE,EAA8EC,WAA9E,EAA2FC,QAA3F,QAA2G,eAA3G;AACA,OAAO,KAAKC,IAAZ,MAAsB,gBAAtB;AACA,SAASC,UAAT,EAAqBC,mBAArB,QAAgD,gBAAhD;AACA,OAAO,KAAKC,EAAZ,MAAoB,iBAApB;AACA,SAASC,iBAAT,EAA4BC,UAA5B,EAAwCC,aAAxC,QAA6D,iBAA7D;AACA,OAAO,KAAKC,EAAZ,MAAoB,uBAApB;AACA,SAASC,gBAAT,QAAiC,uBAAjC;AACA,SAASC,YAAT,EAAuBC,EAAvB,QAAiC,MAAjC;AACA,SAASC,oBAAT,EAA+BC,YAA/B,EAA6CC,SAA7C,EAAwDC,GAAxD,EAA6DC,IAA7D,QAAyE,gBAAzE;AACA,OAAO,KAAKC,EAAZ,MAAoB,qBAApB;AACA,SAASC,6BAAT,QAA8C,qBAA9C;AACA,OAAO,KAAKC,IAAZ,MAAsB,qBAAtB;;;;AA8BsG5B,IAAAA,EC1CpG,6B;AD0CoGA,IAAAA,ECzClG,U;ADyCkGA,IAAAA,E;AAAAA,IAAAA,ECxCpG,e;;;;ADwCoGA,IAAAA,ECzClG,a;ADyCkGA,IAAAA,ECzClG,yBDyCkGA,ECzClG,iD;;;;;;ADyCkGA,IAAAA,ECvCpG,6B;ADuCoGA,IAAAA,ECtClG,U;ADsCkGA,IAAAA,E;AAAAA,IAAAA,ECrCpG,e;;;;ADqCoGA,IAAAA,ECtClG,a;ADsCkGA,IAAAA,ECtClG,yBDsCkGA,ECtClG,+C;;;;;;gBDsCkGA,E;;AAAAA,IAAAA,EE5CtG,2B;AF4CsGA,IAAAA,EE3CpG,yB;AF2CoGA,IAAAA,EErCpG,+B;AFqCoGA,IAAAA,EErC5F;AFqC4FA,MAAAA,EErC5F;AAAA,qBFqC4FA,EErC5F;AAAA;AAAA,M;AFqC4FA,IAAAA,EEpClG,U;AFoCkGA,IAAAA,E;AAAAA,IAAAA,EEnCpG,e;AFmCoGA,IAAAA,EElCtG,wB;;;;mBFkCsGA,E;AAAAA,IAAAA,EEvClG,a;AFuCkGA,IAAAA,EEvClG,iK;AFuCkGA,IAAAA,EEpClG,a;AFoCkGA,IAAAA,EEpClG,yBFoCkGA,EEpClG,0C;;;;;;;;;gBFoCkGA,E;;AAAAA,IAAAA,EGvBpG,gC;AHuBoGA,IAAAA,EGrBlG;AAAA,0BHqBkGA,EGrBlG;AAAA;AAAA,qBHqBkGA,EGrBlG;AAAA;AAAA,M;AHqBkGA,IAAAA,EGnBlG,8B;AHmBkGA,IAAAA,EGnBxE,U;AHmBwEA,IAAAA,EGnBvD,e;AHmBuDA,IAAAA,EGlBlG,8B;AHkBkGA,IAAAA,EGlB1E,U;AHkB0EA,IAAAA,EGlB1D,e;AHkB0DA,IAAAA,EGjBpG,e;;;;;AHiBoGA,IAAAA,EGnBxE,a;AHmBwEA,IAAAA,EGnBxE,kC;AHmBwEA,IAAAA,EGlB1E,a;AHkB0EA,IAAAA,EGlB1E,iC;;;;;;iBHkB0EA,E;;AAAAA,IAAAA,EGhBpG,gC;AHgBoGA,IAAAA,EGflG;AHekGA,MAAAA,EGflG;AAAA,sBHekGA,EGflG;AAAA;AAAA,M;AHekGA,IAAAA,EGPlG,U;AHOkGA,IAAAA,E;AAAAA,IAAAA,EGNpG,e;;;;AHMoGA,IAAAA,EGPlG,a;AHOkGA,IAAAA,EGPlG,yBHOkGA,EGPlG,sD;;;;;;AHOkGA,IAAAA,EGxBtG,+B;AHwBsGA,IAAAA,EGvBpG,qF;AHuBoGA,IAAAA,EGhBpG,qF;AHgBoGA,IAAAA,E;AAAAA,IAAAA,EGLtG,e;;;;;mBHKsGA,E;;gBAAAA,E;;AAAAA,IAAAA,EGtB/E,a;AHsB+EA,IAAAA,EGtB/E,0C;AHsB+EA,IAAAA,EGdjG,a;AHciGA,IAAAA,EGdjG,qBHciGA,EGdjG,oI;;;;;;AHciGA,IAAAA,EGHtG,4B;AHGsGA,IAAAA,EGFpG,6B;AHEoGA,IAAAA,E;AAAAA,IAAAA,EGGlG,oB;AHHkGA,IAAAA,EGIlG,oB;AHJkGA,IAAAA,EGKlG,oB;AHLkGA,IAAAA,EGMpG,e;AHNoGA,IAAAA,EGOtG,e;;;;AHPsGA,IAAAA,EGClG,a;AHDkGA,IAAAA,EGClG,2BHDkGA,EGClG,qC;;;;;;gBHDkGA,E;;AAAAA,IAAAA,EI5CtG,6B;AJ4CsGA,IAAAA,EI3CpG;AJ2CoGA,MAAAA,EI3CpG;AAAA,qBJ2CoGA,EI3CpG;AAAA;AAAA,M;AJ2CoGA,IAAAA,EIvCpG,2B;AJuCoGA,IAAAA,EItClG,yB;AJsCkGA,IAAAA,E;AAAAA,IAAAA,EIhClG,kC;AJgCkGA,IAAAA,EI3BpG,e;AJ2BoGA,IAAAA,EIzBpG,2B;AJyBoGA,IAAAA,EIxBlG,yB;AJwBkGA,IAAAA,E;AAAAA,IAAAA,EIlBlG,kC;AJkBkGA,IAAAA,EIbpG,e;AJaoGA,IAAAA,EIZpG,+B;AJYoGA,IAAAA,EIXlG,W;AJWkGA,IAAAA,E;AAAAA,IAAAA,EIVpG,e;AJUoGA,IAAAA,EITtG,e;;;;mBJSsGA,E;AAAAA,IAAAA,EI1CpG,iD;AJ0CoGA,IAAAA,EIlChG,a;AJkCgGA,IAAAA,EIlChG,sCJkCgGA,EIlChG,iD;AJkCgGA,IAAAA,EI7BhG,a;AJ6BgGA,IAAAA,EI7BhG,6D;AJ6BgGA,IAAAA,EIrBhG,a;AJqBgGA,IAAAA,EIrBhG,sCJqBgGA,EIrBhG,mD;AJqBgGA,IAAAA,EIfhG,a;AJegGA,IAAAA,EIfhG,+D;AJegGA,IAAAA,EIXlG,a;AJWkGA,IAAAA,EIXlG,yBJWkGA,EIXlG,kD;;;;;;AJWkGA,IAAAA,EIPtG,4B;AJOsGA,IAAAA,E;AAAAA,IAAAA,EIDpG,oB;AJCoGA,IAAAA,EIApG,oB;AJAoGA,IAAAA,EICpG,oB;AJDoGA,IAAAA,EIEtG,e;;;;AJFsGA,IAAAA,EIHpG,2BJGoGA,EIHpG,qC;;;;;;AJGoGA,IAAAA,EK3BlG,qC;;;;;;gBL2BkGA,E;;AAAAA,IAAAA,EKvBlG,+B;ALuBkGA,IAAAA,EKhBhG;ALgBgGA,MAAAA,EKhBhG;AAAA,qBLgBgGA,EKhBhG;AAAA;AAAA,M;ALgBgGA,IAAAA,E;AAAAA,IAAAA,EKfjG,e;;;;ALeiGA,IAAAA,EKrBhG,gCLqBgGA,EKrBhG,iC;;;;;;gBLqBgGA,E;;AAAAA,IAAAA,EKblG,+B;ALakGA,IAAAA,EKThG;ALSgGA,MAAAA,EKThG;AAAA,qBLSgGA,EKThG;AAAA;AAAA,M;ALSgGA,IAAAA,E;AAAAA,IAAAA,EKRjG,e;;;;ALQiGA,IAAAA,EKXhG,gCLWgGA,EKXhG,iC;;;;;;ALWgGA,IAAAA,EKChG,sC;;;;;;ALDgGA,IAAAA,EKAlG,2B;ALAkGA,IAAAA,EKChG,mJ;ALDgGA,IAAAA,EKElG,wB;;;;4BLFkGA,E;AAAAA,IAAAA,EKCxE,a;ALDwEA,IAAAA,EKCxE,oC;;;;;;iBLDwEA,E;;AAAAA,IAAAA,EKIhG,+C;ALJgGA,IAAAA,EKM9F;ALN8FA,MAAAA,EKM9F;AAAA,sBLN8FA,EKM9F;AAAA;AAAA,M;ALN8FA,IAAAA,EKO/F,e;;;;;;ALP+FA,IAAAA,EKIhG,mJ;;;;4BLJgGA,E;AAAAA,IAAAA,EKK7F,oC;;;;;;ALL6FA,IAAAA,EKHpG,2B;ALGoGA,IAAAA,EKAlG,mH;ALAkGA,IAAAA,E;AAAAA,IAAAA,EKGlG,wHLHkGA,EKGlG,wB;ALHkGA,IAAAA,EKSpG,wB;;;;iBLToGA,E;;mBAAAA,E;AAAAA,IAAAA,EKAnF,a;ALAmFA,IAAAA,EKAnF,oBLAmFA,EKAnF,uD;;;;;;iBLAmFA,E;;AAAAA,IAAAA,EKYlG,+C;ALZkGA,IAAAA,EKchG;ALdgGA,MAAAA,EKchG;AAAA,sBLdgGA,EKchG;AAAA;AAAA,M;ALdgGA,IAAAA,E;AAAAA,IAAAA,EKgBjG,e;;;;oBLhBiGA,E;AAAAA,IAAAA,EKehG,mCLfgGA,EKehG,iD;;;;;;ALfgGA,IAAAA,EKYlG,oI;;;;4BLZkGA,E;AAAAA,IAAAA,EKa/F,oC;;;;;;ALb+FA,IAAAA,EKJtG,2B;ALIsGA,IAAAA,EKHpG,oG;ALGoGA,IAAAA,E;AAAAA,IAAAA,EKWpG,yGLXoGA,EKWpG,wB;ALXoGA,IAAAA,EKkBtG,wB;;;;iBLlBsGA,E;;mBAAAA,E;AAAAA,IAAAA,EKFjG,a;ALEiGA,IAAAA,EKFjG,oBLEiGA,EKFjG,2E;;;;AL1BL,MAAM6B,mBAAN,CAA0B;AACtBC,EAAAA,WAAW,CAACC,WAAD,EAAcC,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","sourcesContent":["import * as i4 from '@angular/common';\nimport { CommonModule } from '@angular/common';\nimport * as i0 from '@angular/core';\nimport { Injectable, Component, Pipe, EventEmitter, Output, ViewChild, Input, HostBinding, NgModule } from '@angular/core';\nimport * as i1$2 from '@angular/forms';\nimport { Validators, ReactiveFormsModule } from '@angular/forms';\nimport * as i1 from '@spartacus/core';\nimport { GlobalMessageType, I18nModule, provideConfig } from '@spartacus/core';\nimport * as i3 from '@spartacus/storefront';\nimport { FormErrorsModule } from '@spartacus/storefront';\nimport { Subscription, of } from 'rxjs';\nimport { distinctUntilChanged, debounceTime, switchMap, map, take } from 'rxjs/operators';\nimport * as i2 from '@spartacus/asm/root';\nimport { ASM_ENABLED_LOCAL_STORAGE_KEY } from '@spartacus/asm/root';\nimport * as i1$1 from '@spartacus/asm/core';\n\nclass AsmComponentService {\n    constructor(authService, csAgentAuthService, winRef) {\n        this.authService = authService;\n        this.csAgentAuthService = csAgentAuthService;\n        this.winRef = winRef;\n    }\n    logoutCustomerSupportAgentAndCustomer() {\n        this.csAgentAuthService.logoutCustomerSupportAgent();\n    }\n    logoutCustomer() {\n        this.authService.logout();\n    }\n    isCustomerEmulationSessionInProgress() {\n        return this.csAgentAuthService.isCustomerEmulated();\n    }\n    /**\n     * We're currently only removing the persisted storage in the browser\n     * to ensure the ASM experience isn't loaded on the next visit. There are a few\n     * optimizations we could think of:\n     * - drop the `asm` parameter from the URL, in case it's still there\n     * - remove the generated UI from the DOM (outlets currently do not support this)\n     */\n    unload() {\n        if (this.winRef.localStorage) {\n            this.winRef.localStorage.removeItem(ASM_ENABLED_LOCAL_STORAGE_KEY);\n        }\n    }\n}\nAsmComponentService.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: AsmComponentService, deps: [{ token: i1.AuthService }, { token: i2.CsAgentAuthService }, { token: i1.WindowRef }], target: i0.ɵɵFactoryTarget.Injectable });\nAsmComponentService.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: AsmComponentService, providedIn: 'root' });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: AsmComponentService, decorators: [{\n            type: Injectable,\n            args: [{\n                    providedIn: 'root',\n                }]\n        }], ctorParameters: function () { return [{ type: i1.AuthService }, { type: i2.CsAgentAuthService }, { type: i1.WindowRef }]; } });\n\nclass AsmToggleUiComponent {\n    constructor(asmService) {\n        this.asmService = asmService;\n        this.subscription = new Subscription();\n    }\n    ngOnInit() {\n        this.subscription.add(this.asmService.getAsmUiState().subscribe((uiState) => {\n            this.isCollapsed =\n                uiState.collapsed === undefined ? false : uiState.collapsed;\n        }));\n    }\n    toggleUi() {\n        this.asmService.updateAsmUiState({ collapsed: !this.isCollapsed });\n    }\n    ngOnDestroy() {\n        this.subscription.unsubscribe();\n    }\n}\nAsmToggleUiComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: AsmToggleUiComponent, deps: [{ token: i1$1.AsmService }], target: i0.ɵɵFactoryTarget.Component });\nAsmToggleUiComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"12.0.5\", type: AsmToggleUiComponent, selector: \"cx-asm-toggle-ui\", ngImport: i0, template: \"<a class=\\\"toggleUi\\\" (click)=\\\"toggleUi()\\\">\\n  <span [ngClass]=\\\"!isCollapsed ? 'collapseIcon' : 'expandIcon'\\\"></span>\\n  <span *ngIf=\\\"!isCollapsed\\\" class=\\\"label\\\">\\n    {{ 'asm.toggleUi.collapse' | cxTranslate }}\\n  </span>\\n  <span *ngIf=\\\"isCollapsed\\\" class=\\\"label\\\">\\n    {{ 'asm.toggleUi.expand' | cxTranslate }}\\n  </span>\\n</a>\\n\", directives: [{ type: i4.NgClass, selector: \"[ngClass]\", inputs: [\"class\", \"ngClass\"] }, { type: i4.NgIf, selector: \"[ngIf]\", inputs: [\"ngIf\", \"ngIfThen\", \"ngIfElse\"] }], pipes: { \"cxTranslate\": i1.TranslatePipe } });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: AsmToggleUiComponent, decorators: [{\n            type: Component,\n            args: [{\n                    selector: 'cx-asm-toggle-ui',\n                    templateUrl: './asm-toggle-ui.component.html',\n                }]\n        }], ctorParameters: function () { return [{ type: i1$1.AsmService }]; } });\n\nclass FormatTimerPipe {\n    transform(totalSeconds) {\n        if (totalSeconds < 0) {\n            totalSeconds = 0;\n        }\n        const minutes = Math.floor(totalSeconds / 60);\n        const seconds = totalSeconds % 60;\n        let zeroPaddedMinutes;\n        if (minutes < 10) {\n            zeroPaddedMinutes = ('00' + minutes).slice(-2);\n        }\n        else {\n            zeroPaddedMinutes = minutes + '';\n        }\n        const zeroPaddedSeconds = ('00' + seconds).slice(-2);\n        return `${zeroPaddedMinutes}:${zeroPaddedSeconds}`;\n    }\n}\nFormatTimerPipe.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: FormatTimerPipe, deps: [], target: i0.ɵɵFactoryTarget.Pipe });\nFormatTimerPipe.ɵpipe = i0.ɵɵngDeclarePipe({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: FormatTimerPipe, name: \"formatTimer\" });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: FormatTimerPipe, decorators: [{\n            type: Pipe,\n            args: [{\n                    name: 'formatTimer',\n                }]\n        }] });\n\nclass AsmSessionTimerComponent {\n    constructor(config, asmComponentService, routingService, changeDetectorRef, userIdService) {\n        this.config = config;\n        this.asmComponentService = asmComponentService;\n        this.routingService = routingService;\n        this.changeDetectorRef = changeDetectorRef;\n        this.userIdService = userIdService;\n        this.subscriptions = new Subscription();\n        this.maxStartDelayInSeconds = 60000;\n    }\n    ngOnInit() {\n        this.timeLeft = this.getTimerStartDelayInSeconds();\n        this.interval = setInterval(() => {\n            if (this.timeLeft > 0) {\n                this.timeLeft--;\n            }\n            else {\n                clearInterval(this.interval);\n                this.asmComponentService.logoutCustomerSupportAgentAndCustomer();\n            }\n            this.changeDetectorRef.markForCheck();\n        }, 1000);\n        this.resetOnNavigate();\n        this.resetOnCustomerSessionChange();\n    }\n    resetOnNavigate() {\n        this.subscriptions.add(this.routingService.isNavigating().subscribe((isNavigating) => {\n            if (isNavigating) {\n                this.resetTimer();\n            }\n        }));\n    }\n    resetOnCustomerSessionChange() {\n        this.subscriptions.add(this.userIdService\n            .getUserId()\n            .pipe(distinctUntilChanged())\n            .subscribe(() => this.resetTimer()));\n    }\n    resetTimer() {\n        if (this.timeLeft > 0) {\n            this.timeLeft = this.getTimerStartDelayInSeconds();\n        }\n    }\n    getTimerStartDelayInSeconds() {\n        var _a, _b;\n        if (((_b = (_a = this.config.asm) === null || _a === void 0 ? void 0 : _a.agentSessionTimer) === null || _b === void 0 ? void 0 : _b.startingDelayInSeconds) === undefined) {\n            return 600;\n        }\n        if (this.config.asm.agentSessionTimer.startingDelayInSeconds >\n            this.maxStartDelayInSeconds) {\n            return this.maxStartDelayInSeconds;\n        }\n        else {\n            return this.config.asm.agentSessionTimer.startingDelayInSeconds;\n        }\n    }\n    ngOnDestroy() {\n        this.subscriptions.unsubscribe();\n        if (this.interval) {\n            clearInterval(this.interval);\n        }\n    }\n}\nAsmSessionTimerComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: AsmSessionTimerComponent, deps: [{ token: i1$1.AsmConfig }, { token: AsmComponentService }, { token: i1.RoutingService }, { token: i0.ChangeDetectorRef }, { token: i1.UserIdService }], target: i0.ɵɵFactoryTarget.Component });\nAsmSessionTimerComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"12.0.5\", type: AsmSessionTimerComponent, selector: \"cx-asm-session-timer\", ngImport: i0, template: \"<span class=\\\"label\\\">{{ 'asm.agentSessionTimer.label' | cxTranslate }}:</span>\\n<span class=\\\"time\\\"\\n  >{{ timeLeft | formatTimer }}\\n  {{ 'asm.agentSessionTimer.minutes' | cxTranslate }}</span\\n>\\n<button\\n  class=\\\"reset\\\"\\n  title=\\\"{{ 'asm.agentSessionTimer.reset' | cxTranslate }}\\\"\\n  (click)=\\\"resetTimer()\\\"\\n></button>\\n\", pipes: { \"cxTranslate\": i1.TranslatePipe, \"formatTimer\": FormatTimerPipe } });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: AsmSessionTimerComponent, decorators: [{\n            type: Component,\n            args: [{\n                    selector: 'cx-asm-session-timer',\n                    templateUrl: './asm-session-timer.component.html',\n                }]\n        }], ctorParameters: function () { return [{ type: i1$1.AsmConfig }, { type: AsmComponentService }, { type: i1.RoutingService }, { type: i0.ChangeDetectorRef }, { type: i1.UserIdService }]; } });\n\nclass CustomerEmulationComponent {\n    constructor(asmComponentService, userService) {\n        this.asmComponentService = asmComponentService;\n        this.userService = userService;\n        this.subscription = new Subscription();\n    }\n    ngOnInit() {\n        this.subscription.add(this.userService.get().subscribe((user) => {\n            if (user)\n                this.customer = user;\n        }));\n        this.isCustomerEmulationSessionInProgress$ =\n            this.asmComponentService.isCustomerEmulationSessionInProgress();\n    }\n    logoutCustomer() {\n        this.asmComponentService.logoutCustomer();\n    }\n    ngOnDestroy() {\n        this.subscription.unsubscribe();\n    }\n}\nCustomerEmulationComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: CustomerEmulationComponent, deps: [{ token: AsmComponentService }, { token: i1.UserService }], target: i0.ɵɵFactoryTarget.Component });\nCustomerEmulationComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"12.0.5\", type: CustomerEmulationComponent, selector: \"cx-customer-emulation\", ngImport: i0, template: \"<ng-container *ngIf=\\\"isCustomerEmulationSessionInProgress$ | async\\\">\\n  <input\\n    formcontrolname=\\\"customer\\\"\\n    type=\\\"text\\\"\\n    disabled=\\\"true\\\"\\n    placeholder=\\\"{{ customer?.name }}, {{ customer?.uid }}\\\"\\n  />\\n  <button (click)=\\\"logoutCustomer()\\\">\\n    {{ 'asm.endSession' | cxTranslate }}\\n  </button>\\n</ng-container>\\n\", directives: [{ type: i4.NgIf, selector: \"[ngIf]\", inputs: [\"ngIf\", \"ngIfThen\", \"ngIfElse\"] }], pipes: { \"async\": i4.AsyncPipe, \"cxTranslate\": i1.TranslatePipe } });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: CustomerEmulationComponent, decorators: [{\n            type: Component,\n            args: [{\n                    selector: 'cx-customer-emulation',\n                    templateUrl: './customer-emulation.component.html',\n                }]\n        }], ctorParameters: function () { return [{ type: AsmComponentService }, { type: i1.UserService }]; } });\n\nclass CustomerSelectionComponent {\n    constructor(fb, asmService, config) {\n        this.fb = fb;\n        this.asmService = asmService;\n        this.config = config;\n        this.subscription = new Subscription();\n        this.submitEvent = new EventEmitter();\n    }\n    ngOnInit() {\n        this.customerSelectionForm = this.fb.group({\n            searchTerm: ['', Validators.required],\n        });\n        this.asmService.customerSearchReset();\n        this.searchResultsLoading$ =\n            this.asmService.getCustomerSearchResultsLoading();\n        this.searchResults = this.asmService.getCustomerSearchResults();\n        this.subscription.add(this.customerSelectionForm.controls.searchTerm.valueChanges\n            .pipe(debounceTime(300))\n            .subscribe((searchTermValue) => {\n            this.handleSearchTerm(searchTermValue);\n        }));\n    }\n    handleSearchTerm(searchTermValue) {\n        var _a, _b;\n        if (!!this.selectedCustomer &&\n            searchTermValue !== this.selectedCustomer.name) {\n            this.selectedCustomer = undefined;\n        }\n        if (Boolean(this.selectedCustomer)) {\n            return;\n        }\n        this.asmService.customerSearchReset();\n        if (searchTermValue.trim().length >= 3) {\n            this.asmService.customerSearch({\n                query: searchTermValue,\n                pageSize: (_b = (_a = this.config.asm) === null || _a === void 0 ? void 0 : _a.customerSearch) === null || _b === void 0 ? void 0 : _b.maxResults,\n            });\n        }\n    }\n    selectCustomerFromList(customer) {\n        this.selectedCustomer = customer;\n        this.customerSelectionForm.controls.searchTerm.setValue(this.selectedCustomer.name);\n        this.asmService.customerSearchReset();\n    }\n    onSubmit() {\n        if (this.customerSelectionForm.valid && !!this.selectedCustomer) {\n            this.submitEvent.emit({ customerId: this.selectedCustomer.customerId });\n        }\n        else {\n            this.customerSelectionForm.markAllAsTouched();\n        }\n    }\n    onDocumentClick(event) {\n        if (Boolean(this.resultList)) {\n            if (this.resultList.nativeElement.contains(event.target) ||\n                this.searchTerm.nativeElement.contains(event.target)) {\n                return;\n            }\n            else {\n                this.asmService.customerSearchReset();\n            }\n        }\n    }\n    closeResults() {\n        this.asmService.customerSearchReset();\n    }\n    ngOnDestroy() {\n        this.subscription.unsubscribe();\n        this.asmService.customerSearchReset();\n    }\n}\nCustomerSelectionComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: CustomerSelectionComponent, deps: [{ token: i1$2.FormBuilder }, { token: i1$1.AsmService }, { token: i1$1.AsmConfig }], target: i0.ɵɵFactoryTarget.Component });\nCustomerSelectionComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"12.0.5\", type: CustomerSelectionComponent, selector: \"cx-customer-selection\", outputs: { submitEvent: \"submitEvent\" }, host: { listeners: { \"document:click\": \"onDocumentClick($event)\" } }, viewQueries: [{ propertyName: \"resultList\", first: true, predicate: [\"resultList\"], descendants: true }, { propertyName: \"searchTerm\", first: true, predicate: [\"searchTerm\"], descendants: true }], ngImport: i0, template: \"<form (ngSubmit)=\\\"onSubmit()\\\" [formGroup]=\\\"customerSelectionForm\\\">\\n  <label>\\n    <input\\n      aria-required=\\\"true\\\"\\n      #searchTerm\\n      type=\\\"text\\\"\\n      formControlName=\\\"searchTerm\\\"\\n      placeholder=\\\"{{ 'asm.customerSearch.searchTerm.label' | cxTranslate }}\\\"\\n    />\\n    <cx-form-errors\\n      aria-live=\\\"assertive\\\"\\n      aria-atomic=\\\"true\\\"\\n      [control]=\\\"customerSelectionForm.get('searchTerm')\\\"\\n    ></cx-form-errors>\\n  </label>\\n  <button type=\\\"submit\\\">\\n    {{ 'asm.customerSearch.submit' | cxTranslate }}\\n  </button>\\n</form>\\n\\n<div *ngIf=\\\"searchResults | async as results\\\" class=\\\"asm-results\\\" #resultList>\\n  <button\\n    *ngFor=\\\"let result of results.entries\\\"\\n    (click)=\\\"selectCustomerFromList(result)\\\"\\n  >\\n    <span class=\\\"result-name\\\">{{ result.name }}</span>\\n    <span class=\\\"result-id\\\">{{ result.uid }}</span>\\n  </button>\\n  <button\\n    (click)=\\\"closeResults()\\\"\\n    *ngIf=\\\"\\n      !(searchResultsLoading$ | async) &&\\n      searchTerm.value.length >= 3 &&\\n      !!results.entries &&\\n      results.entries.length <= 0\\n    \\\"\\n  >\\n    {{ 'asm.customerSearch.noMatch' | cxTranslate }}\\n  </button>\\n</div>\\n\\n<div class=\\\"asm-results\\\" *ngIf=\\\"searchResultsLoading$ | async\\\">\\n  <div\\n    class=\\\"spinner\\\"\\n    aria-hidden=\\\"false\\\"\\n    [attr.aria-label]=\\\"'common.loading' | cxTranslate\\\"\\n  >\\n    <div></div>\\n    <div></div>\\n    <div></div>\\n  </div>\\n</div>\\n\", components: [{ type: i3.FormErrorsComponent, selector: \"cx-form-errors\", inputs: [\"prefix\", \"translationParams\", \"control\"] }], directives: [{ type: i1$2.ɵNgNoValidate, selector: \"form:not([ngNoForm]):not([ngNativeValidate])\" }, { type: i1$2.NgControlStatusGroup, selector: \"[formGroupName],[formArrayName],[ngModelGroup],[formGroup],form:not([ngNoForm]),[ngForm]\" }, { type: i1$2.FormGroupDirective, selector: \"[formGroup]\", inputs: [\"formGroup\"], outputs: [\"ngSubmit\"], exportAs: [\"ngForm\"] }, { type: i1$2.DefaultValueAccessor, selector: \"input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]\" }, { type: i1$2.NgControlStatus, selector: \"[formControlName],[ngModel],[formControl]\" }, { type: i1$2.FormControlName, selector: \"[formControlName]\", inputs: [\"disabled\", \"formControlName\", \"ngModel\"], outputs: [\"ngModelChange\"] }, { type: i4.NgIf, selector: \"[ngIf]\", inputs: [\"ngIf\", \"ngIfThen\", \"ngIfElse\"] }, { type: i4.NgForOf, selector: \"[ngFor][ngForOf]\", inputs: [\"ngForOf\", \"ngForTrackBy\", \"ngForTemplate\"] }], pipes: { \"cxTranslate\": i1.TranslatePipe, \"async\": i4.AsyncPipe } });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: CustomerSelectionComponent, decorators: [{\n            type: Component,\n            args: [{\n                    selector: 'cx-customer-selection',\n                    templateUrl: './customer-selection.component.html',\n                    host: {\n                        '(document:click)': 'onDocumentClick($event)',\n                    },\n                }]\n        }], ctorParameters: function () { return [{ type: i1$2.FormBuilder }, { type: i1$1.AsmService }, { type: i1$1.AsmConfig }]; }, propDecorators: { submitEvent: [{\n                type: Output\n            }], resultList: [{\n                type: ViewChild,\n                args: ['resultList']\n            }], searchTerm: [{\n                type: ViewChild,\n                args: ['searchTerm']\n            }] } });\n\nclass CSAgentLoginFormComponent {\n    constructor(fb) {\n        this.fb = fb;\n        this.csAgentTokenLoading = false;\n        this.submitEvent = new EventEmitter();\n    }\n    ngOnInit() {\n        this.csAgentLoginForm = this.fb.group({\n            userId: ['', [Validators.required]],\n            password: ['', [Validators.required]],\n        });\n    }\n    onSubmit() {\n        var _a, _b;\n        if (this.csAgentLoginForm.valid) {\n            this.submitEvent.emit({\n                userId: (_a = this.csAgentLoginForm.get('userId')) === null || _a === void 0 ? void 0 : _a.value,\n                password: (_b = this.csAgentLoginForm.get('password')) === null || _b === void 0 ? void 0 : _b.value,\n            });\n        }\n        else {\n            this.csAgentLoginForm.markAllAsTouched();\n        }\n    }\n}\nCSAgentLoginFormComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: CSAgentLoginFormComponent, deps: [{ token: i1$2.FormBuilder }], target: i0.ɵɵFactoryTarget.Component });\nCSAgentLoginFormComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"12.0.5\", type: CSAgentLoginFormComponent, selector: \"cx-csagent-login-form\", inputs: { csAgentTokenLoading: \"csAgentTokenLoading\" }, outputs: { submitEvent: \"submitEvent\" }, ngImport: i0, template: \"<form\\n  (ngSubmit)=\\\"onSubmit()\\\"\\n  [formGroup]=\\\"csAgentLoginForm\\\"\\n  *ngIf=\\\"!csAgentTokenLoading\\\"\\n>\\n  <label>\\n    <input\\n      aria-required=\\\"true\\\"\\n      type=\\\"text\\\"\\n      formControlName=\\\"userId\\\"\\n      placeholder=\\\"{{ 'asm.loginForm.userId.label' | cxTranslate }}\\\"\\n    />\\n    <cx-form-errors\\n      aria-live=\\\"assertive\\\"\\n      aria-atomic=\\\"true\\\"\\n      [control]=\\\"csAgentLoginForm.get('userId')\\\"\\n    ></cx-form-errors>\\n  </label>\\n\\n  <label>\\n    <input\\n      aria-required=\\\"true\\\"\\n      type=\\\"password\\\"\\n      placeholder=\\\"{{ 'asm.loginForm.password.label' | cxTranslate }}\\\"\\n      formControlName=\\\"password\\\"\\n    />\\n    <cx-form-errors\\n      aria-live=\\\"assertive\\\"\\n      aria-atomic=\\\"true\\\"\\n      [control]=\\\"csAgentLoginForm.get('password')\\\"\\n    ></cx-form-errors>\\n  </label>\\n  <button type=\\\"submit\\\">\\n    {{ 'asm.loginForm.submit' | cxTranslate }}\\n  </button>\\n</form>\\n\\n<div\\n  *ngIf=\\\"csAgentTokenLoading\\\"\\n  class=\\\"spinner\\\"\\n  aria-hidden=\\\"false\\\"\\n  [attr.aria-label]=\\\"'common.loading' | cxTranslate\\\"\\n>\\n  <div></div>\\n  <div></div>\\n  <div></div>\\n</div>\\n\", components: [{ type: i3.FormErrorsComponent, selector: \"cx-form-errors\", inputs: [\"prefix\", \"translationParams\", \"control\"] }], directives: [{ type: i4.NgIf, selector: \"[ngIf]\", inputs: [\"ngIf\", \"ngIfThen\", \"ngIfElse\"] }, { type: i1$2.ɵNgNoValidate, selector: \"form:not([ngNoForm]):not([ngNativeValidate])\" }, { type: i1$2.NgControlStatusGroup, selector: \"[formGroupName],[formArrayName],[ngModelGroup],[formGroup],form:not([ngNoForm]),[ngForm]\" }, { type: i1$2.FormGroupDirective, selector: \"[formGroup]\", inputs: [\"formGroup\"], outputs: [\"ngSubmit\"], exportAs: [\"ngForm\"] }, { type: i1$2.DefaultValueAccessor, selector: \"input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]\" }, { type: i1$2.NgControlStatus, selector: \"[formControlName],[ngModel],[formControl]\" }, { type: i1$2.FormControlName, selector: \"[formControlName]\", inputs: [\"disabled\", \"formControlName\", \"ngModel\"], outputs: [\"ngModelChange\"] }], pipes: { \"cxTranslate\": i1.TranslatePipe } });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: CSAgentLoginFormComponent, decorators: [{\n            type: Component,\n            args: [{\n                    selector: 'cx-csagent-login-form',\n                    templateUrl: './csagent-login-form.component.html',\n                }]\n        }], ctorParameters: function () { return [{ type: i1$2.FormBuilder }]; }, propDecorators: { csAgentTokenLoading: [{\n                type: Input\n            }], submitEvent: [{\n                type: Output\n            }] } });\n\nclass AsmMainUiComponent {\n    constructor(authService, csAgentAuthService, userService, asmComponentService, globalMessageService, routingService, asmService) {\n        this.authService = authService;\n        this.csAgentAuthService = csAgentAuthService;\n        this.userService = userService;\n        this.asmComponentService = asmComponentService;\n        this.globalMessageService = globalMessageService;\n        this.routingService = routingService;\n        this.asmService = asmService;\n        this.disabled = false;\n        this.startingCustomerSession = false;\n    }\n    ngOnInit() {\n        this.customerSupportAgentLoggedIn$ =\n            this.csAgentAuthService.isCustomerSupportAgentLoggedIn();\n        this.csAgentTokenLoading$ =\n            this.csAgentAuthService.getCustomerSupportAgentTokenLoading();\n        this.customer$ = this.authService.isUserLoggedIn().pipe(switchMap((isLoggedIn) => {\n            if (isLoggedIn) {\n                this.handleCustomerSessionStartRedirection();\n                return this.userService.get();\n            }\n            else {\n                return of(undefined);\n            }\n        }));\n        this.isCollapsed$ = this.asmService\n            .getAsmUiState()\n            .pipe(map((uiState) => uiState.collapsed === undefined ? false : uiState.collapsed));\n    }\n    handleCustomerSessionStartRedirection() {\n        this.asmComponentService\n            .isCustomerEmulationSessionInProgress()\n            .pipe(take(1))\n            .subscribe((isCustomerEmulated) => {\n            if (this.startingCustomerSession && isCustomerEmulated) {\n                this.startingCustomerSession = false;\n                this.globalMessageService.remove(GlobalMessageType.MSG_TYPE_ERROR);\n                this.routingService.go('/');\n            }\n        });\n    }\n    loginCustomerSupportAgent({ userId, password, }) {\n        this.csAgentAuthService.authorizeCustomerSupportAgent(userId, password);\n    }\n    logout() {\n        this.asmComponentService.logoutCustomerSupportAgentAndCustomer();\n    }\n    startCustomerEmulationSession({ customerId }) {\n        if (customerId) {\n            this.csAgentAuthService.startCustomerEmulationSession(customerId);\n            this.startingCustomerSession = true;\n        }\n        else {\n            this.globalMessageService.add({ key: 'asm.error.noCustomerId' }, GlobalMessageType.MSG_TYPE_ERROR);\n        }\n    }\n    hideUi() {\n        this.disabled = true;\n        this.asmComponentService.unload();\n    }\n}\nAsmMainUiComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: AsmMainUiComponent, deps: [{ token: i1.AuthService }, { token: i2.CsAgentAuthService }, { token: i1.UserService }, { token: AsmComponentService }, { token: i1.GlobalMessageService }, { token: i1.RoutingService }, { token: i1$1.AsmService }], target: i0.ɵɵFactoryTarget.Component });\nAsmMainUiComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"12.0.5\", type: AsmMainUiComponent, selector: \"cx-asm-main-ui\", host: { properties: { \"class.hidden\": \"this.disabled\" } }, ngImport: i0, template: \"<div class=\\\"asm-bar\\\">\\n  <div class=\\\"asm-bar-branding\\\">\\n    <img\\n      class=\\\"logo\\\"\\n      src=\\\"data:image/png;base64,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\\\"\\n      width=\\\"48\\\"\\n      height=\\\"24\\\"\\n      alt=\\\"{{ 'asm.mainLogoLabel' | cxTranslate }}\\\"\\n    />\\n\\n    <div class=\\\"asm-title\\\">\\n      {{ 'asm.mainTitle' | cxTranslate }}\\n    </div>\\n  </div>\\n  <div class=\\\"asm-bar-actions\\\">\\n    <cx-asm-toggle-ui></cx-asm-toggle-ui>\\n\\n    <cx-asm-session-timer\\n      *ngIf=\\\"customerSupportAgentLoggedIn$ | async\\\"\\n    ></cx-asm-session-timer>\\n\\n    <button\\n      class=\\\"close\\\"\\n      title=\\\"{{ 'asm.hideUi' | cxTranslate }}\\\"\\n      *ngIf=\\\"\\n        !(customerSupportAgentLoggedIn$ | async) &&\\n        !(csAgentTokenLoading$ | async)\\n      \\\"\\n      (click)=\\\"hideUi()\\\"\\n    ></button>\\n\\n    <button\\n      class=\\\"logout\\\"\\n      title=\\\"{{ 'asm.logout' | cxTranslate }}\\\"\\n      *ngIf=\\\"customerSupportAgentLoggedIn$ | async\\\"\\n      (click)=\\\"logout()\\\"\\n    ></button>\\n  </div>\\n</div>\\n\\n<ng-container *ngIf=\\\"!(isCollapsed$ | async) as notCollapsed\\\">\\n  <ng-container\\n    *ngIf=\\\"customerSupportAgentLoggedIn$ | async; else showLoginForm\\\"\\n  >\\n    <ng-container *ngIf=\\\"customer$ | async; else showCustomerSelection\\\">\\n      <cx-customer-emulation *ngIf=\\\"notCollapsed\\\"></cx-customer-emulation>\\n    </ng-container>\\n    <ng-template #showCustomerSelection>\\n      <cx-customer-selection\\n        *ngIf=\\\"notCollapsed\\\"\\n        (submitEvent)=\\\"startCustomerEmulationSession($event)\\\"\\n      ></cx-customer-selection>\\n    </ng-template>\\n  </ng-container>\\n\\n  <ng-template #showLoginForm>\\n    <cx-csagent-login-form\\n      *ngIf=\\\"notCollapsed\\\"\\n      (submitEvent)=\\\"loginCustomerSupportAgent($event)\\\"\\n      [csAgentTokenLoading]=\\\"csAgentTokenLoading$ | async\\\"\\n    ></cx-csagent-login-form>\\n  </ng-template>\\n</ng-container>\\n\", components: [{ type: AsmToggleUiComponent, selector: \"cx-asm-toggle-ui\" }, { type: AsmSessionTimerComponent, selector: \"cx-asm-session-timer\" }, { type: CustomerEmulationComponent, selector: \"cx-customer-emulation\" }, { type: CustomerSelectionComponent, selector: \"cx-customer-selection\", outputs: [\"submitEvent\"] }, { type: CSAgentLoginFormComponent, selector: \"cx-csagent-login-form\", inputs: [\"csAgentTokenLoading\"], outputs: [\"submitEvent\"] }], directives: [{ type: i4.NgIf, selector: \"[ngIf]\", inputs: [\"ngIf\", \"ngIfThen\", \"ngIfElse\"] }], pipes: { \"cxTranslate\": i1.TranslatePipe, \"async\": i4.AsyncPipe } });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: AsmMainUiComponent, decorators: [{\n            type: Component,\n            args: [{\n                    selector: 'cx-asm-main-ui',\n                    templateUrl: './asm-main-ui.component.html',\n                }]\n        }], ctorParameters: function () { return [{ type: i1.AuthService }, { type: i2.CsAgentAuthService }, { type: i1.UserService }, { type: AsmComponentService }, { type: i1.GlobalMessageService }, { type: i1.RoutingService }, { type: i1$1.AsmService }]; }, propDecorators: { disabled: [{\n                type: HostBinding,\n                args: ['class.hidden']\n            }] } });\n\nconst defaultAsmLayoutConfig = {\n    launch: {\n        ASM: {\n            outlet: 'cx-storefront',\n            component: AsmMainUiComponent,\n        },\n    },\n};\n\nclass AsmComponentsModule {\n}\nAsmComponentsModule.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: AsmComponentsModule, deps: [], target: i0.ɵɵFactoryTarget.NgModule });\nAsmComponentsModule.ɵmod = i0.ɵɵngDeclareNgModule({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: AsmComponentsModule, declarations: [AsmMainUiComponent,\n        CSAgentLoginFormComponent,\n        CustomerSelectionComponent,\n        AsmSessionTimerComponent,\n        FormatTimerPipe,\n        CustomerEmulationComponent,\n        AsmToggleUiComponent], imports: [CommonModule, ReactiveFormsModule, I18nModule, FormErrorsModule], exports: [AsmMainUiComponent,\n        CSAgentLoginFormComponent,\n        CustomerSelectionComponent,\n        AsmSessionTimerComponent,\n        FormatTimerPipe,\n        CustomerEmulationComponent,\n        AsmToggleUiComponent] });\nAsmComponentsModule.ɵinj = i0.ɵɵngDeclareInjector({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: AsmComponentsModule, providers: [provideConfig(defaultAsmLayoutConfig)], imports: [[CommonModule, ReactiveFormsModule, I18nModule, FormErrorsModule]] });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: AsmComponentsModule, decorators: [{\n            type: NgModule,\n            args: [{\n                    imports: [CommonModule, ReactiveFormsModule, I18nModule, FormErrorsModule],\n                    declarations: [\n                        AsmMainUiComponent,\n                        CSAgentLoginFormComponent,\n                        CustomerSelectionComponent,\n                        AsmSessionTimerComponent,\n                        FormatTimerPipe,\n                        CustomerEmulationComponent,\n                        AsmToggleUiComponent,\n                    ],\n                    exports: [\n                        AsmMainUiComponent,\n                        CSAgentLoginFormComponent,\n                        CustomerSelectionComponent,\n                        AsmSessionTimerComponent,\n                        FormatTimerPipe,\n                        CustomerEmulationComponent,\n                        AsmToggleUiComponent,\n                    ],\n                    providers: [provideConfig(defaultAsmLayoutConfig)],\n                }]\n        }] });\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { AsmComponentService, AsmComponentsModule, AsmMainUiComponent, AsmSessionTimerComponent, AsmToggleUiComponent, CSAgentLoginFormComponent, CustomerEmulationComponent, CustomerSelectionComponent, FormatTimerPipe };\n//# sourceMappingURL=spartacus-asm-components.js.map\n",null,null,null,null,null,null]},"metadata":{},"sourceType":"module"}