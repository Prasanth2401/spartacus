{"ast":null,"code":"import * as i0 from '@angular/core';\nimport { Injectable, NgModule } from '@angular/core';\nimport { map } from 'rxjs/operators';\nimport { STORE_FINDER_SEARCH_PAGE_NORMALIZER, STORE_COUNT_NORMALIZER, StoreFinderAdapter } from '@spartacus/storefinder/core';\nimport * as i2 from '@spartacus/core';\nimport { POINT_OF_SERVICE_NORMALIZER, provideDefaultConfig } from '@spartacus/core';\nimport * as i1 from '@angular/common/http';\n\nclass OccStoreFinderAdapter {\n  constructor(http, occEndpointsService, converterService) {\n    this.http = http;\n    this.occEndpointsService = occEndpointsService;\n    this.converterService = converterService;\n  }\n\n  search(query, searchConfig, longitudeLatitude, radius) {\n    return this.callOccFindStores(query, searchConfig, longitudeLatitude, radius).pipe(this.converterService.pipeable(STORE_FINDER_SEARCH_PAGE_NORMALIZER));\n  }\n\n  loadCounts() {\n    return this.http.get(this.occEndpointsService.buildUrl('storescounts')).pipe(map(({\n      countriesAndRegionsStoreCount\n    }) => countriesAndRegionsStoreCount), this.converterService.pipeableMany(STORE_COUNT_NORMALIZER));\n  }\n\n  load(storeId) {\n    return this.http.get(this.occEndpointsService.buildUrl('store', {\n      urlParams: {\n        storeId\n      }\n    })).pipe(this.converterService.pipeable(POINT_OF_SERVICE_NORMALIZER));\n  }\n\n  callOccFindStores(query, searchConfig, longitudeLatitude, radius) {\n    const params = {};\n\n    if (longitudeLatitude) {\n      params['longitude'] = String(longitudeLatitude.longitude);\n      params['latitude'] = String(longitudeLatitude.latitude);\n      params['radius'] = String(radius);\n    } else {\n      params['query'] = query;\n    }\n\n    if (searchConfig.pageSize) {\n      params['pageSize'] = String(searchConfig.pageSize);\n    }\n\n    if (searchConfig.currentPage) {\n      params['currentPage'] = String(searchConfig.currentPage);\n    }\n\n    if (searchConfig.sort) {\n      params['sort'] = searchConfig.sort;\n    }\n\n    return this.http.get(this.occEndpointsService.buildUrl('stores', {\n      queryParams: params\n    }));\n  }\n\n}\n\nOccStoreFinderAdapter.ɵfac = function OccStoreFinderAdapter_Factory(t) {\n  return new (t || OccStoreFinderAdapter)(i0.ɵɵinject(i1.HttpClient), i0.ɵɵinject(i2.OccEndpointsService), i0.ɵɵinject(i2.ConverterService));\n};\n\nOccStoreFinderAdapter.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n  token: OccStoreFinderAdapter,\n  factory: OccStoreFinderAdapter.ɵfac\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(OccStoreFinderAdapter, [{\n    type: Injectable\n  }], function () {\n    return [{\n      type: i1.HttpClient\n    }, {\n      type: i2.OccEndpointsService\n    }, {\n      type: i2.ConverterService\n    }];\n  }, null);\n})(); // Imported for side effects (module augmentation)\n\n\nconst defaultOccStoreFinderConfig = {\n  backend: {\n    occ: {\n      endpoints: {\n        store: 'stores/${storeId}?fields=FULL',\n        stores: 'stores?fields=stores(name,displayName,formattedDistance,openingHours(weekDayOpeningList(FULL),specialDayOpeningList(FULL)),geoPoint(latitude,longitude),address(line1,line2,town,region(FULL),postalCode,phone,country,email), features),pagination(DEFAULT),sorts(DEFAULT)',\n        storescounts: 'stores/storescounts'\n      }\n    }\n  }\n};\n\nclass StoreFinderOccModule {}\n\nStoreFinderOccModule.ɵfac = function StoreFinderOccModule_Factory(t) {\n  return new (t || StoreFinderOccModule)();\n};\n\nStoreFinderOccModule.ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n  type: StoreFinderOccModule\n});\nStoreFinderOccModule.ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({\n  providers: [provideDefaultConfig(defaultOccStoreFinderConfig), {\n    provide: StoreFinderAdapter,\n    useClass: OccStoreFinderAdapter\n  }]\n});\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(StoreFinderOccModule, [{\n    type: NgModule,\n    args: [{\n      providers: [provideDefaultConfig(defaultOccStoreFinderConfig), {\n        provide: StoreFinderAdapter,\n        useClass: OccStoreFinderAdapter\n      }]\n    }]\n  }], null, null);\n})();\n/**\n * Generated bundle index. Do not edit.\n */\n\n\nexport { OccStoreFinderAdapter, StoreFinderOccModule }; //# sourceMappingURL=spartacus-storefinder-occ.js.map","map":{"version":3,"sources":["D:/spartacus/front-store/node_modules/@spartacus/storefinder/fesm2015/spartacus-storefinder-occ.js"],"names":["i0","Injectable","NgModule","map","STORE_FINDER_SEARCH_PAGE_NORMALIZER","STORE_COUNT_NORMALIZER","StoreFinderAdapter","i2","POINT_OF_SERVICE_NORMALIZER","provideDefaultConfig","i1","OccStoreFinderAdapter","constructor","http","occEndpointsService","converterService","search","query","searchConfig","longitudeLatitude","radius","callOccFindStores","pipe","pipeable","loadCounts","get","buildUrl","countriesAndRegionsStoreCount","pipeableMany","load","storeId","urlParams","params","String","longitude","latitude","pageSize","currentPage","sort","queryParams","ɵfac","HttpClient","OccEndpointsService","ConverterService","ɵprov","type","defaultOccStoreFinderConfig","backend","occ","endpoints","store","stores","storescounts","StoreFinderOccModule","ɵmod","ɵinj","provide","useClass","args","providers"],"mappings":"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","sourcesContent":["import * as i0 from '@angular/core';\nimport { Injectable, NgModule } from '@angular/core';\nimport { map } from 'rxjs/operators';\nimport { STORE_FINDER_SEARCH_PAGE_NORMALIZER, STORE_COUNT_NORMALIZER, StoreFinderAdapter } from '@spartacus/storefinder/core';\nimport * as i2 from '@spartacus/core';\nimport { POINT_OF_SERVICE_NORMALIZER, provideDefaultConfig } from '@spartacus/core';\nimport * as i1 from '@angular/common/http';\n\nclass OccStoreFinderAdapter {\n    constructor(http, occEndpointsService, converterService) {\n        this.http = http;\n        this.occEndpointsService = occEndpointsService;\n        this.converterService = converterService;\n    }\n    search(query, searchConfig, longitudeLatitude, radius) {\n        return this.callOccFindStores(query, searchConfig, longitudeLatitude, radius).pipe(this.converterService.pipeable(STORE_FINDER_SEARCH_PAGE_NORMALIZER));\n    }\n    loadCounts() {\n        return this.http\n            .get(this.occEndpointsService.buildUrl('storescounts'))\n            .pipe(map(({ countriesAndRegionsStoreCount }) => countriesAndRegionsStoreCount), this.converterService.pipeableMany(STORE_COUNT_NORMALIZER));\n    }\n    load(storeId) {\n        return this.http\n            .get(this.occEndpointsService.buildUrl('store', { urlParams: { storeId } }))\n            .pipe(this.converterService.pipeable(POINT_OF_SERVICE_NORMALIZER));\n    }\n    callOccFindStores(query, searchConfig, longitudeLatitude, radius) {\n        const params = {};\n        if (longitudeLatitude) {\n            params['longitude'] = String(longitudeLatitude.longitude);\n            params['latitude'] = String(longitudeLatitude.latitude);\n            params['radius'] = String(radius);\n        }\n        else {\n            params['query'] = query;\n        }\n        if (searchConfig.pageSize) {\n            params['pageSize'] = String(searchConfig.pageSize);\n        }\n        if (searchConfig.currentPage) {\n            params['currentPage'] = String(searchConfig.currentPage);\n        }\n        if (searchConfig.sort) {\n            params['sort'] = searchConfig.sort;\n        }\n        return this.http.get(this.occEndpointsService.buildUrl('stores', { queryParams: params }));\n    }\n}\nOccStoreFinderAdapter.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: OccStoreFinderAdapter, deps: [{ token: i1.HttpClient }, { token: i2.OccEndpointsService }, { token: i2.ConverterService }], target: i0.ɵɵFactoryTarget.Injectable });\nOccStoreFinderAdapter.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: OccStoreFinderAdapter });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: OccStoreFinderAdapter, decorators: [{\n            type: Injectable\n        }], ctorParameters: function () { return [{ type: i1.HttpClient }, { type: i2.OccEndpointsService }, { type: i2.ConverterService }]; } });\n\n// Imported for side effects (module augmentation)\n\nconst defaultOccStoreFinderConfig = {\n    backend: {\n        occ: {\n            endpoints: {\n                store: 'stores/${storeId}?fields=FULL',\n                stores: 'stores?fields=stores(name,displayName,formattedDistance,openingHours(weekDayOpeningList(FULL),specialDayOpeningList(FULL)),geoPoint(latitude,longitude),address(line1,line2,town,region(FULL),postalCode,phone,country,email), features),pagination(DEFAULT),sorts(DEFAULT)',\n                storescounts: 'stores/storescounts',\n            },\n        },\n    },\n};\n\nclass StoreFinderOccModule {\n}\nStoreFinderOccModule.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: StoreFinderOccModule, deps: [], target: i0.ɵɵFactoryTarget.NgModule });\nStoreFinderOccModule.ɵmod = i0.ɵɵngDeclareNgModule({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: StoreFinderOccModule });\nStoreFinderOccModule.ɵinj = i0.ɵɵngDeclareInjector({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: StoreFinderOccModule, providers: [\n        provideDefaultConfig(defaultOccStoreFinderConfig),\n        { provide: StoreFinderAdapter, useClass: OccStoreFinderAdapter },\n    ] });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.0.5\", ngImport: i0, type: StoreFinderOccModule, decorators: [{\n            type: NgModule,\n            args: [{\n                    providers: [\n                        provideDefaultConfig(defaultOccStoreFinderConfig),\n                        { provide: StoreFinderAdapter, useClass: OccStoreFinderAdapter },\n                    ],\n                }]\n        }] });\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { OccStoreFinderAdapter, StoreFinderOccModule };\n//# sourceMappingURL=spartacus-storefinder-occ.js.map\n"]},"metadata":{},"sourceType":"module"}